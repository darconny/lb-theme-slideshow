angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(e){return e}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(e,t,n,i,o,a){function r(){a.$broadcast("gettextLanguageChanged")}var s,l="$$noContext",u='<span id="test" title="test" class="tested">test</span>',c=angular.element("<span>"+u+"</span>").html()!==u,d=function(e){return s.debug&&s.currentLanguage!==s.baseLanguage?s.debugPrefix+e:e},p=function(e){return s.showTranslatedMarkers?s.translatedMarkerPrefix+e+s.translatedMarkerSuffix:e};return s={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:i("strings"),setCurrentLanguage:function(e){this.currentLanguage=e,r()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(e,t){this.strings[e]||(this.strings[e]={});for(var n in t){var i=t[n];if(c&&(n=angular.element("<span>"+n+"</span>").html()),angular.isString(i)||angular.isArray(i)){var o={};o[l]=i,i=o}for(var a in i){var s=i[a];i[a]=angular.isArray(s)?s:[s]}this.strings[e][n]=i}r()},getStringFormFor:function(t,n,i,o){if(!t)return null;var a=this.strings[t]||{},r=a[n]||{},s=r[o||l]||[];return s[e(t,i)]},getString:function(e,n,i){var a=t(this.currentLanguage);return e=this.getStringFormFor(this.currentLanguage,e,1,i)||this.getStringFormFor(a,e,1,i)||d(e),e=n?o(e)(n):e,p(e)},getPlural:function(e,n,i,a,r){var s=t(this.currentLanguage);return n=this.getStringFormFor(this.currentLanguage,n,e,r)||this.getStringFormFor(s,n,e,r)||d(1===e?n:i),a&&(a.$count=e,n=o(n)(a)),p(n)},loadRemote:function(e){return n({method:"GET",url:e,cache:s.cache}).then(function(e){var t=e.data;for(var n in t)s.setStrings(n,t[n]);return e})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(e,t,n,i,o){function a(e,t,n){if(!e)throw new Error("You should add a "+t+" attribute whenever you add a "+n+" attribute.")}var r=function(){return String.prototype.trim?function(e){return"string"==typeof e?e.trim():e}:function(e){return"string"==typeof e?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}(),s=parseInt((/msie (\d+)/.exec(angular.lowercase(o.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(o,l){a(!l.translatePlural||l.translateN,"translate-n","translate-plural"),a(!l.translateN||l.translatePlural,"translate-plural","translate-n");var u=r(o.html()),c=l.translatePlural,d=l.translateContext;return s<=8&&"<!--IE fix-->"===u.slice(-13)&&(u=u.slice(0,-13)),l.$set("translate",void 0),{post:function(o,a,s){function l(){var t;c?(o=m||(m=o.$new()),o.$count=p(o),t=e.getPlural(o.$count,u,c,null,d)):t=e.getString(u,null,d);var s=a.contents();if(0!==s.length){if(t===r(s.html()))return void(f&&i(s)(o));var l=angular.element("<span>"+t+"</span>");i(l.contents())(o);var h=l.contents();n.enter(h,a),n.leave(s)}}var p=t(s.translateN),m=null,f=!0;s.translateN&&o.$watch(s.translateN,l),o.$on("gettextLanguageChanged",l),l(),f=!1}}}}}]),angular.module("gettext").factory("gettextFallbackLanguage",function(){var e={},t=/([^_]+)_[^_]+$/;return function(n){if(e[n])return e[n];var i=t.exec(n);return i?(e[n]=i[1],i[1]):null}}),angular.module("gettext").filter("translate",["gettextCatalog",function(e){function t(t,n){return e.getString(t,null,n)}return t.$stateful=!0,t}]),angular.module("gettext").factory("gettextPlurals",function(){return function(e,t){switch(e){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return 0!=t?1:0;case"mk":return 1==t||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:0!=t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"mnk":return 0==t?0:1==t?1:2;case"ro":return 1==t?0:0==t||t%100>0&&t%100<20?1:2;case"pl":return 1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return 1==t?0:t>=2&&t<=4?1:2;case"sl":return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0;case"mt":return 1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"gd":return 1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3;case"cy":return 1==t?0:2==t?1:8!=t&&11!=t?2:3;case"kw":return 1==t?0:2==t?1:3==t?2:3;case"ga":return 1==t?0:2==t?1:t<7?2:t<11?3:4;case"ar":return 0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5;default:return 1!=t?1:0}}}),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[translate]{visibility:hidden !important;}</style>'),!function(e){function t(){return e("body").height()>e(window).height()}var n=function(t,n){this.settings=n,this.checkSettings(),this.imgAnalyzerTimeout=null,this.entries=null,this.buildingRow={entriesBuff:[],width:0,height:0,aspectRatio:0},this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this["yield"]={every:2,flushed:0},this.border=n.border>=0?n.border:n.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges(),this.offY=this.border,this.rows=0,this.spinner={phase:0,timeSlot:150,$el:e('<div class="spinner"><span></span><span></span><span></span></div>'),intervalId:null},this.checkWidthIntervalId=null,this.galleryWidth=t.width(),this.$gallery=t};n.prototype.getSuffix=function(e,t){var n,i;for(n=e>t?e:t,i=0;i<this.suffixRanges.length;i++)if(n<=this.suffixRanges[i])return this.settings.sizeRangeSuffixes[this.suffixRanges[i]];return this.settings.sizeRangeSuffixes[this.suffixRanges[i-1]]},n.prototype.removeSuffix=function(e,t){return e.substring(0,e.length-t.length)},n.prototype.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.prototype.getUsedSuffix=function(e){for(var t in this.settings.sizeRangeSuffixes)if(this.settings.sizeRangeSuffixes.hasOwnProperty(t)){if(0===this.settings.sizeRangeSuffixes[t].length)continue;if(this.endsWith(e,this.settings.sizeRangeSuffixes[t]))return this.settings.sizeRangeSuffixes[t]}return""},n.prototype.newSrc=function(e,t,n,i){var o;if(this.settings.thumbnailPath)o=this.settings.thumbnailPath(e,t,n,i);else{var a=e.match(this.settings.extension),r=null!==a?a[0]:"";o=e.replace(this.settings.extension,""),o=this.removeSuffix(o,this.getUsedSuffix(o)),o+=this.getSuffix(t,n)+r}return o},n.prototype.showImg=function(e,t){this.settings.cssAnimation?(e.addClass("entry-visible"),t&&t()):(e.stop().fadeTo(this.settings.imagesAnimationDuration,1,t),e.find("> img, > a > img").stop().fadeTo(this.settings.imagesAnimationDuration,1,t))},n.prototype.extractImgSrcFromImage=function(e){var t="undefined"!=typeof e.data("safe-src")?e.data("safe-src"):e.attr("src");return e.data("jg.originalSrc",t),t},n.prototype.imgFromEntry=function(e){var t=e.find("> img");return 0===t.length&&(t=e.find("> a > img")),0===t.length?null:t},n.prototype.captionFromEntry=function(e){var t=e.find("> .caption");return 0===t.length?null:t},n.prototype.displayEntry=function(t,n,i,o,a,r){t.width(o),t.height(r),t.css("top",i),t.css("left",n);var s=this.imgFromEntry(t);if(null!==s){s.css("width",o),s.css("height",a),s.css("margin-left",-o/2),s.css("margin-top",-a/2);var l=s.attr("src"),u=this.newSrc(l,o,a,s[0]);s.one("error",function(){s.attr("src",s.data("jg.originalSrc"))});var c=function(){l!==u&&s.attr("src",u)};"skipped"===t.data("jg.loaded")?this.onImageEvent(l,e.proxy(function(){this.showImg(t,c),t.data("jg.loaded",!0)},this)):this.showImg(t,c)}else this.showImg(t);this.displayEntryCaption(t)},n.prototype.displayEntryCaption=function(t){var n=this.imgFromEntry(t);if(null!==n&&this.settings.captions){var i=this.captionFromEntry(t);if(null===i){var o=n.attr("alt");this.isValidCaption(o)||(o=t.attr("title")),this.isValidCaption(o)&&(i=e('<div class="caption">'+o+"</div>"),t.append(i),t.data("jg.createdCaption",!0))}null!==i&&(this.settings.cssAnimation||i.stop().fadeTo(0,this.settings.captionSettings.nonVisibleOpacity),this.addCaptionEventsHandlers(t))}else this.removeCaptionEventsHandlers(t)},n.prototype.isValidCaption=function(e){return"undefined"!=typeof e&&e.length>0},n.prototype.onEntryMouseEnterForCaption=function(t){var n=this.captionFromEntry(e(t.currentTarget));this.settings.cssAnimation?n.addClass("caption-visible").removeClass("caption-hidden"):n.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.visibleOpacity)},n.prototype.onEntryMouseLeaveForCaption=function(t){var n=this.captionFromEntry(e(t.currentTarget));this.settings.cssAnimation?n.removeClass("caption-visible").removeClass("caption-hidden"):n.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.nonVisibleOpacity)},n.prototype.addCaptionEventsHandlers=function(t){var n=t.data("jg.captionMouseEvents");"undefined"==typeof n&&(n={mouseenter:e.proxy(this.onEntryMouseEnterForCaption,this),mouseleave:e.proxy(this.onEntryMouseLeaveForCaption,this)},t.on("mouseenter",void 0,void 0,n.mouseenter),t.on("mouseleave",void 0,void 0,n.mouseleave),t.data("jg.captionMouseEvents",n))},n.prototype.removeCaptionEventsHandlers=function(e){var t=e.data("jg.captionMouseEvents");"undefined"!=typeof t&&(e.off("mouseenter",void 0,t.mouseenter),e.off("mouseleave",void 0,t.mouseleave),e.removeData("jg.captionMouseEvents"))},n.prototype.prepareBuildingRow=function(e){var t,n,i,o,a,r=!0,s=0,l=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,u=l/this.buildingRow.aspectRatio,c=this.settings.rowHeight,d=this.buildingRow.width/l>this.settings.justifyThreshold;if(e&&"hide"===this.settings.lastRow&&!d){for(t=0;t<this.buildingRow.entriesBuff.length;t++)n=this.buildingRow.entriesBuff[t],this.settings.cssAnimation?n.removeClass("entry-visible"):(n.stop().fadeTo(0,.1),n.find("> img, > a > img").fadeTo(0,0));return-1}for(e&&!d&&"justify"!==this.settings.lastRow&&"hide"!==this.settings.lastRow&&(r=!1,this.rows>0&&(c=(this.offY-this.border-this.settings.margins*this.rows)/this.rows,r=c*this.buildingRow.aspectRatio/l>this.settings.justifyThreshold)),t=0;t<this.buildingRow.entriesBuff.length;t++)n=this.buildingRow.entriesBuff[t],i=n.data("jg.width")/n.data("jg.height"),r?(o=t===this.buildingRow.entriesBuff.length-1?l:u*i,a=u):(o=c*i,a=c),l-=Math.round(o),n.data("jg.jwidth",Math.round(o)),n.data("jg.jheight",Math.ceil(a)),(0===t||s>a)&&(s=a);return this.buildingRow.height=s,r},n.prototype.clearBuildingRow=function(){this.buildingRow.entriesBuff=[],this.buildingRow.aspectRatio=0,this.buildingRow.width=0},n.prototype.flushRow=function(e){var t,n,i,o=this.settings,a=this.border;if(n=this.prepareBuildingRow(e),e&&"hide"===o.lastRow&&-1===n)return void this.clearBuildingRow();if(this.maxRowHeight&&(this.maxRowHeight.isPercentage&&this.maxRowHeight.value*o.rowHeight<this.buildingRow.height?this.buildingRow.height=this.maxRowHeight.value*o.rowHeight:this.maxRowHeight.value>=o.rowHeight&&this.maxRowHeight.value<this.buildingRow.height&&(this.buildingRow.height=this.maxRowHeight.value)),"center"===o.lastRow||"right"===o.lastRow){var r=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*o.margins;for(i=0;i<this.buildingRow.entriesBuff.length;i++)t=this.buildingRow.entriesBuff[i],r-=t.data("jg.jwidth");"center"===o.lastRow?a+=r/2:"right"===o.lastRow&&(a+=r)}for(i=0;i<this.buildingRow.entriesBuff.length;i++)t=this.buildingRow.entriesBuff[i],this.displayEntry(t,a,this.offY,t.data("jg.jwidth"),t.data("jg.jheight"),this.buildingRow.height),a+=t.data("jg.jwidth")+o.margins;this.galleryHeightToSet=this.offY+this.buildingRow.height+this.border,this.$gallery.height(this.galleryHeightToSet+this.getSpinnerHeight()),(!e||this.buildingRow.height<=o.rowHeight&&n)&&(this.offY+=this.buildingRow.height+o.margins,this.rows+=1,this.clearBuildingRow(),this.$gallery.trigger("jg.rowflush"))};var i=!1;n.prototype.checkWidth=function(){this.checkWidthIntervalId=setInterval(e.proxy(function(){var e=parseFloat(this.$gallery.width());t()===i?Math.abs(e-this.galleryWidth)>this.settings.refreshSensitivity&&(this.galleryWidth=e,this.rewind(),this.startImgAnalyzer(!0)):(i=t(),this.galleryWidth=e)},this),this.settings.refreshTime)},n.prototype.isSpinnerActive=function(){return null!==this.spinner.intervalId},n.prototype.getSpinnerHeight=function(){return this.spinner.$el.innerHeight()},n.prototype.stopLoadingSpinnerAnimation=function(){clearInterval(this.spinner.intervalId),this.spinner.intervalId=null,this.$gallery.height(this.$gallery.height()-this.getSpinnerHeight()),this.spinner.$el.detach()},n.prototype.startLoadingSpinnerAnimation=function(){var e=this.spinner,t=e.$el.find("span");clearInterval(e.intervalId),this.$gallery.append(e.$el),this.$gallery.height(this.offY+this.buildingRow.height+this.getSpinnerHeight()),e.intervalId=setInterval(function(){e.phase<t.length?t.eq(e.phase).fadeTo(e.timeSlot,1):t.eq(e.phase-t.length).fadeTo(e.timeSlot,0),e.phase=(e.phase+1)%(2*t.length)},e.timeSlot)},n.prototype.rewind=function(){this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.offY=this.border,this.rows=0,this.clearBuildingRow()},n.prototype.updateEntries=function(t){var n;return t&&null!=this.lastFetchedEntry?n=e(this.lastFetchedEntry).nextAll(this.settings.selector).toArray():(this.entries=[],n=this.$gallery.children(this.settings.selector).toArray()),n.length>0&&(e.isFunction(this.settings.sort)?n=this.sortArray(n):this.settings.randomize&&(n=this.shuffleArray(n)),this.lastFetchedEntry=n[n.length-1],this.settings.filter?n=this.filterArray(n):this.resetFilters(n)),this.entries=this.entries.concat(n),!0},n.prototype.insertToGallery=function(t){var n=this;e.each(t,function(){e(this).appendTo(n.$gallery)})},n.prototype.shuffleArray=function(e){var t,n,i;for(t=e.length-1;t>0;t--)n=Math.floor(Math.random()*(t+1)),i=e[t],e[t]=e[n],e[n]=i;return this.insertToGallery(e),e},n.prototype.sortArray=function(e){return e.sort(this.settings.sort),this.insertToGallery(e),e},n.prototype.resetFilters=function(t){for(var n=0;n<t.length;n++)e(t[n]).removeClass("jg-filtered")},n.prototype.filterArray=function(t){var n=this.settings;if("string"===e.type(n.filter))return t.filter(function(t){var i=e(t);return i.is(n.filter)?(i.removeClass("jg-filtered"),!0):(i.addClass("jg-filtered").removeClass("jg-visible"),!1)});if(e.isFunction(n.filter)){for(var i=t.filter(n.filter),o=0;o<t.length;o++)-1==i.indexOf(t[o])?e(t[o]).addClass("jg-filtered").removeClass("jg-visible"):e(t[o]).removeClass("jg-filtered");return i}},n.prototype.destroy=function(){clearInterval(this.checkWidthIntervalId),e.each(this.entries,e.proxy(function(t,n){var i=e(n);i.css("width",""),i.css("height",""),i.css("top",""),i.css("left",""),i.data("jg.loaded",void 0),i.removeClass("jg-entry");var o=this.imgFromEntry(i);o.css("width",""),o.css("height",""),o.css("margin-left",""),o.css("margin-top",""),o.attr("src",o.data("jg.originalSrc")),o.data("jg.originalSrc",void 0),this.removeCaptionEventsHandlers(i);var a=this.captionFromEntry(i);i.data("jg.createdCaption")?(i.data("jg.createdCaption",void 0),null!==a&&a.remove()):null!==a&&a.fadeTo(0,1)},this)),this.$gallery.css("height",""),this.$gallery.removeClass("justified-gallery"),this.$gallery.data("jg.controller",void 0)},n.prototype.analyzeImages=function(t){for(var n=this.lastAnalyzedIndex+1;n<this.entries.length;n++){var i=e(this.entries[n]);if(i.data("jg.loaded")===!0||"skipped"===i.data("jg.loaded")){var o=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,a=i.data("jg.width")/i.data("jg.height");if(o/(this.buildingRow.aspectRatio+a)<this.settings.rowHeight&&(this.flushRow(!1),++this["yield"].flushed>=this["yield"].every))return void this.startImgAnalyzer(t);this.buildingRow.entriesBuff.push(i),this.buildingRow.aspectRatio+=a,this.buildingRow.width+=a*this.settings.rowHeight,this.lastAnalyzedIndex=n}else if("error"!==i.data("jg.loaded"))return}this.buildingRow.entriesBuff.length>0&&this.flushRow(!0),this.isSpinnerActive()&&this.stopLoadingSpinnerAnimation(),this.stopImgAnalyzerStarter(),this.$gallery.trigger(t?"jg.resize":"jg.complete"),this.$gallery.height(this.galleryHeightToSet)},n.prototype.stopImgAnalyzerStarter=function(){this["yield"].flushed=0,null!==this.imgAnalyzerTimeout&&clearTimeout(this.imgAnalyzerTimeout)},n.prototype.startImgAnalyzer=function(e){var t=this;this.stopImgAnalyzerStarter(),this.imgAnalyzerTimeout=setTimeout(function(){t.analyzeImages(e)},.001)},n.prototype.onImageEvent=function(t,n,i){if(n||i){var o=new Image,a=e(o);n&&a.one("load",function(){a.off("load error"),n(o)}),i&&a.one("error",function(){a.off("load error"),i(o)}),o.src=t}},n.prototype.init=function(){var t=!1,n=!1,i=this;e.each(this.entries,function(o,a){var r=e(a),s=i.imgFromEntry(r);if(r.addClass("jg-entry"),r.data("jg.loaded")!==!0&&"skipped"!==r.data("jg.loaded"))if(null!==i.settings.rel&&r.attr("rel",i.settings.rel),null!==i.settings.target&&r.attr("target",i.settings.target),null!==s){var l=i.extractImgSrcFromImage(s);if(s.attr("src",l),i.settings.waitThumbnailsLoad===!1){var u=parseFloat(s.attr("width")),c=parseFloat(s.attr("height"));if(!isNaN(u)&&!isNaN(c))return r.data("jg.width",u),r.data("jg.height",c),r.data("jg.loaded","skipped"),n=!0,i.startImgAnalyzer(!1),!0}r.data("jg.loaded",!1),t=!0,i.isSpinnerActive()||i.startLoadingSpinnerAnimation(),i.onImageEvent(l,function(e){r.data("jg.width",e.width),r.data("jg.height",e.height),r.data("jg.loaded",!0),i.startImgAnalyzer(!1)},function(){r.data("jg.loaded","error"),i.startImgAnalyzer(!1)})}else r.data("jg.loaded",!0),r.data("jg.width",r.width()|parseFloat(r.css("width"))|1),r.data("jg.height",r.height()|parseFloat(r.css("height"))|1)}),t||n||this.startImgAnalyzer(!1),this.checkWidth()},n.prototype.checkOrConvertNumber=function(t,n){if("string"===e.type(t[n])&&(t[n]=parseFloat(t[n])),"number"!==e.type(t[n]))throw n+" must be a number";if(isNaN(t[n]))throw"invalid number for "+n},n.prototype.checkSizeRangesSuffixes=function(){if("object"!==e.type(this.settings.sizeRangeSuffixes))throw"sizeRangeSuffixes must be defined and must be an object";var t=[];for(var n in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(n)&&t.push(n);for(var i={0:""},o=0;o<t.length;o++)if("string"===e.type(t[o]))try{var a=parseInt(t[o].replace(/^[a-z]+/,""),10);i[a]=this.settings.sizeRangeSuffixes[t[o]]}catch(r){throw"sizeRangeSuffixes keys must contains correct numbers ("+r+")"}else i[t[o]]=this.settings.sizeRangeSuffixes[t[o]];this.settings.sizeRangeSuffixes=i},n.prototype.retrieveMaxRowHeight=function(){var t={};if("string"===e.type(this.settings.maxRowHeight))this.settings.maxRowHeight.match(/^[0-9]+%$/)?(t.value=parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1])/100,t.isPercentage=!1):(t.value=parseFloat(this.settings.maxRowHeight),t.isPercentage=!0);else{if("number"!==e.type(this.settings.maxRowHeight)){if(this.settings.maxRowHeight===!1||null===this.settings.maxRowHeight||"undefined"==typeof this.settings.maxRowHeight)return null;throw"maxRowHeight must be a number or a percentage"}t.value=this.settings.maxRowHeight,t.isPercentage=!1}if(isNaN(t.value))throw"invalid number for maxRowHeight";return t.isPercentage&&t.value<100&&(t.value=100),t},n.prototype.checkSettings=function(){this.checkSizeRangesSuffixes(),this.checkOrConvertNumber(this.settings,"rowHeight"),this.checkOrConvertNumber(this.settings,"margins"),this.checkOrConvertNumber(this.settings,"border");var t=["justify","nojustify","left","center","right","hide"];if(-1===t.indexOf(this.settings.lastRow))throw"lastRow must be one of: "+t.join(", ");if(this.checkOrConvertNumber(this.settings,"justifyThreshold"),this.settings.justifyThreshold<0||this.settings.justifyThreshold>1)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!==e.type(this.settings.cssAnimation))throw"cssAnimation must be a boolean";if("boolean"!==e.type(this.settings.captions))throw"captions must be a boolean";if(this.checkOrConvertNumber(this.settings.captionSettings,"animationDuration"),this.checkOrConvertNumber(this.settings.captionSettings,"visibleOpacity"),this.settings.captionSettings.visibleOpacity<0||this.settings.captionSettings.visibleOpacity>1)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings.captionSettings,"nonVisibleOpacity"),this.settings.captionSettings.nonVisibleOpacity<0||this.settings.captionSettings.nonVisibleOpacity>1)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings,"imagesAnimationDuration"),this.checkOrConvertNumber(this.settings,"refreshTime"),this.checkOrConvertNumber(this.settings,"refreshSensitivity"),"boolean"!==e.type(this.settings.randomize))throw"randomize must be a boolean";if("string"!==e.type(this.settings.selector))throw"selector must be a string";if(this.settings.sort!==!1&&!e.isFunction(this.settings.sort))throw"sort must be false or a comparison function";if(this.settings.filter!==!1&&!e.isFunction(this.settings.filter)&&"string"!==e.type(this.settings.filter))throw"filter must be false, a string or a filter function"},n.prototype.retrieveSuffixRanges=function(){var e=[];for(var t in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(t)&&e.push(parseInt(t,10));return e.sort(function(e,t){return e>t?1:t>e?-1:0}),e},n.prototype.updateSettings=function(t){this.settings=e.extend({},this.settings,t),this.checkSettings(),this.border=this.settings.border>=0?this.settings.border:this.settings.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges()},e.fn.justifiedGallery=function(t){return this.each(function(i,o){var a=e(o);a.addClass("justified-gallery");var r=a.data("jg.controller");if("undefined"==typeof r){if("undefined"!=typeof t&&null!==t&&"object"!==e.type(t)){if("destroy"===t)return;throw"The argument must be an object"}r=new n(a,e.extend({},e.fn.justifiedGallery.defaults,t)),a.data("jg.controller",r)}else if("norewind"===t);else{if("destroy"===t)return void r.destroy();r.updateSettings(t),r.rewind()}r.updateEntries("norewind"===t)&&r.init()})},e.fn.justifiedGallery.defaults={sizeRangeSuffixes:{},thumbnailPath:void 0,rowHeight:120,maxRowHeight:!1,margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.9,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!0,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:200,refreshSensitivity:0,randomize:!1,sort:!1,filter:!1,selector:"a, div:not(.spinner)"}}(jQuery),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var a=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10),r>=1&&8>r&&(i.isOldIOSPhone=!0))}var s=a.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;l=parseFloat(l),l>=1&&(4.4>l&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(a)}for(var u,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],m=0;4>m;m++){n=p[m];for(var f=0;3>f;f++)u=d[f],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var h=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),i=window.setTimeout(function(){e(t+n)},n);return h=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)});var a=this,r=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(l,i);var u,c,d,p,m,f,h,g,v,y,w,b,x,C,I,_,S,T,E,R,k,A,D,F,M,O,L,P,z,Z,N,j,H,U,B,K,W,$,G,Y,q,V,X,Q,J,ee,te,ne,ie,oe,ae,re,se,le,ue,ce,de=function(){return{x:0,y:0}},pe=de(),me=de(),fe=de(),he={},ge=0,ve={},ye=de(),we=0,be=!0,xe=[],Ce={},Ie=!1,_e=function(e,t){o.extend(a,t.publicMethods),xe.push(e)},Se=function(e){var t=Jt();return e>t-1?e-t:0>e?t+e:e},Te={},Ee=function(e,t){return Te[e]||(Te[e]=[]),Te[e].push(t)},Re=function(e){var t=Te[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(a,n)}},ke=function(){return(new Date).getTime()},Ae=function(e){le=e,a.bg.style.opacity=e*l.bgOpacity},De=function(e,t,n,i,o){(!Ie||o&&o!==a.currItem)&&(i/=o?o.fitRatio:a.currItem.fitRatio),e[A]=b+t+"px, "+n+"px"+x+" scale("+i+")"},Fe=function(e){ie&&(e&&(y>a.currItem.fitRatio?Ie||(pn(a.currItem,!1,!0),Ie=!0):Ie&&(pn(a.currItem),Ie=!1)),De(ie,fe.x,fe.y,y))},Me=function(e){e.container&&De(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Oe=function(e,t){t[A]=b+e+"px, 0px"+x},Le=function(e,t){if(!l.loop&&t){var n=p+(ye.x*ge-e)/ye.x,i=Math.round(e-yt.x);(0>n&&i>0||n>=Jt()-1&&0>i)&&(e=yt.x+i*l.mainScrollEndFriction)}yt.x=e,Oe(e,m)},Pe=function(e,t){var n=wt[e]-ve[e];return me[e]+pe[e]+n-n*(t/w)},ze=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ze=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ne=null,je=function(){Ne&&(o.unbind(document,"mousemove",je),o.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,Re("mouseUsed")),Ne=setTimeout(function(){Ne=null},100)},He=function(){o.bind(document,"keydown",a),N.transform&&o.bind(a.scrollWrap,"click",a),l.mouseUsed||o.bind(document,"mousemove",je),o.bind(window,"resize scroll",a),Re("bindEvents")},Ue=function(){o.unbind(window,"resize",a),o.unbind(window,"scroll",v.scroll),o.unbind(document,"keydown",a),o.unbind(document,"mousemove",je),N.transform&&o.unbind(a.scrollWrap,"click",a),$&&o.unbind(window,h,a),Re("unbindEvents")},Be=function(e,t){var n=ln(a.currItem,he,e);return t&&(ne=n),n},Ke=function(e){return e||(e=a.currItem),e.initialZoomLevel},We=function(e){return e||(e=a.currItem),e.w>0?l.maxSpreadZoom:1},$e=function(e,t,n,i){return i===a.currItem.initialZoomLevel?(n[e]=a.currItem.initialPosition[e],!0):(n[e]=Pe(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ge=function(){if(A){var t=N.perspective&&!F;return b="translate"+(t?"3d(":"("),void(x=N.perspective?", 0px)":")")}A="left",o.addClass(e,"pswp--ie"),Oe=function(e,t){t.left=e+"px"},Me=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Fe=function(){if(ie){var e=ie,t=a.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=fe.x+"px",e.top=fe.y+"px"}}},Ye=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,a[t]()))},qe=function(e){e&&(q||Y||oe||K)&&(e.preventDefault(),e.stopPropagation())},Ve=function(){a.setScrollOffset(0,o.getScrollY())},Xe={},Qe=0,Je=function(e){Xe[e]&&(Xe[e].raf&&O(Xe[e].raf),Qe--,delete Xe[e])},et=function(e){Xe[e]&&Je(e),Xe[e]||(Qe++,Xe[e]={})},tt=function(){for(var e in Xe)Xe.hasOwnProperty(e)&&Je(e)},nt=function(e,t,n,i,o,a,r){var s,l=ke();et(e);var u=function(){if(Xe[e]){if(s=ke()-l,s>=i)return Je(e),a(n),void(r&&r());a((n-t)*o(s/i)+t),Xe[e].raf=M(u)}};u()},it={shout:Re,listen:Ee,viewportSize:he,options:l,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return y},getCurrentIndex:function(){return p},isDragging:function(){return $},isZooming:function(){return J},setScrollOffset:function(e,t){ve.x=e,Z=ve.y=t,Re("updateScrollOffset",ve)},applyZoomPan:function(e,t,n,i){fe.x=t,fe.y=n,y=e,Fe(i)},init:function(){if(!u&&!c){var n;a.framework=o,a.template=e,a.bg=o.getChildByClass(e,"pswp__bg"),L=e.className,u=!0,N=o.detectFeatures(),M=N.raf,O=N.caf,A=N.transform,z=N.oldIE,a.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),a.container=o.getChildByClass(a.scrollWrap,"pswp__container"),m=a.container.style,a.itemHolders=_=[{el:a.container.children[0],wrap:0,index:-1},{el:a.container.children[1],wrap:0,index:-1},{el:a.container.children[2],wrap:0,index:-1}],_[0].el.style.display=_[2].el.style.display="none",Ge(),v={resize:a.updateSize,scroll:Ve,keydown:Ye,click:qe};var i=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<xe.length;n++)a["init"+xe[n]]();if(t){var r=a.ui=new t(a,o);r.init()}Re("firstUpdate"),p=p||l.index||0,(isNaN(p)||0>p||p>=Jt())&&(p=0),a.currItem=Qt(p),(N.isOldIOSPhone||N.isOldAndroid)&&(be=!1),e.setAttribute("aria-hidden","false"),l.modal&&(be?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===Z&&(Re("initialLayout"),Z=P=o.getScrollY());var d="pswp--open ";for(l.mainClass&&(d+=l.mainClass+" "),l.showHideOpacity&&(d+="pswp--animate_opacity "),d+=F?"pswp--touch":"pswp--notouch",d+=N.animationName?" pswp--css_animation":"",d+=N.svg?" pswp--svg":"",
o.addClass(e,d),a.updateSize(),f=-1,we=null,n=0;s>n;n++)Oe((n+f)*ye.x,_[n].el.style);z||o.bind(a.scrollWrap,g,a),Ee("initialZoomInEnd",function(){a.setContent(_[0],p-1),a.setContent(_[2],p+1),_[0].el.style.display=_[2].el.style.display="block",l.focus&&e.focus(),He()}),a.setContent(_[1],p),a.updateCurrItem(),Re("afterInit"),be||(C=setInterval(function(){Qe||$||J||y!==a.currItem.initialZoomLevel||a.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,Re("close"),Ue(),tn(a.currItem,null,!0,a.destroy))},destroy:function(){Re("destroy"),Yt&&clearTimeout(Yt),e.setAttribute("aria-hidden","true"),e.className=L,C&&clearInterval(C),o.unbind(a.scrollWrap,g,a),o.unbind(window,"scroll",a),_t(),tt(),Te=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),fe.x=e,fe.y=t,Fe()},handleEvent:function(e){e=e||window.event,v[e.type]&&v[e.type](e)},goTo:function(e){e=Se(e);var t=e-p;we=t,p=e,a.currItem=Qt(p),ge-=t,Le(ye.x*ge),tt(),oe=!1,a.updateCurrItem()},next:function(){a.goTo(p+1)},prev:function(){a.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Re("beforeChange",0),_[1].el.children.length){var t=_[1].el.children[0];ie=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ie=null;ne=a.currItem.bounds,w=y=a.currItem.initialZoomLevel,fe.x=ne.center.x,fe.y=ne.center.y,e&&Re("afterChange")},invalidateCurrItems:function(){I=!0;for(var e=0;s>e;e++)_[e].item&&(_[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==we){var t,n=Math.abs(we);if(!(e&&2>n)){a.currItem=Qt(p),Ie=!1,Re("beforeChange",we),n>=s&&(f+=we+(we>0?-s:s),n=s);for(var i=0;n>i;i++)we>0?(t=_.shift(),_[s-1]=t,f++,Oe((f+2)*ye.x,t.el.style),a.setContent(t,p-n+i+1+1)):(t=_.pop(),_.unshift(t),f--,Oe(f*ye.x,t.el.style),a.setContent(t,p+n-i-1-1));if(ie&&1===Math.abs(we)){var o=Qt(S);o.initialZoomLevel!==y&&(ln(o,he),pn(o),Me(o))}we=0,a.updateCurrZoomItem(),S=p,Re("afterChange")}}},updateSize:function(t){if(!be&&l.modal){var n=o.getScrollY();if(Z!==n&&(e.style.top=n+"px",Z=n),!t&&Ce.x===window.innerWidth&&Ce.y===window.innerHeight)return;Ce.x=window.innerWidth,Ce.y=window.innerHeight,e.style.height=Ce.y+"px"}if(he.x=a.scrollWrap.clientWidth,he.y=a.scrollWrap.clientHeight,Ve(),ye.x=he.x+Math.round(he.x*l.spacing),ye.y=he.y,Le(ye.x*ge),Re("beforeResize"),void 0!==f){for(var i,r,u,c=0;s>c;c++)i=_[c],Oe((c+f)*ye.x,i.el.style),u=p+c-1,l.loop&&Jt()>2&&(u=Se(u)),r=Qt(u),r&&(I||r.needsUpdate||!r.bounds)?(a.cleanSlide(r),a.setContent(i,u),1===c&&(a.currItem=r,a.updateCurrZoomItem(!0)),r.needsUpdate=!1):-1===i.index&&u>=0&&a.setContent(i,u),r&&r.container&&(ln(r,he),pn(r),Me(r));I=!1}w=y=a.currItem.initialZoomLevel,ne=a.currItem.bounds,ne&&(fe.x=ne.center.x,fe.y=ne.center.y,Fe(!0)),Re("resize")},zoomTo:function(e,t,n,i,a){t&&(w=y,wt.x=Math.abs(t.x)-fe.x,wt.y=Math.abs(t.y)-fe.y,ze(me,fe));var r=Be(e,!1),s={};$e("x",r,s,e),$e("y",r,s,e);var l=y,u={x:fe.x,y:fe.y};Ze(s);var c=function(t){1===t?(y=e,fe.x=s.x,fe.y=s.y):(y=(e-l)*t+l,fe.x=(s.x-u.x)*t+u.x,fe.y=(s.y-u.y)*t+u.y),a&&a(t),Fe(1===t)};n?nt("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},ot=30,at=10,rt={},st={},lt={},ut={},ct={},dt=[],pt={},mt=[],ft={},ht=0,gt=de(),vt=0,yt=de(),wt=de(),bt=de(),xt=function(e,t){return e.x===t.x&&e.y===t.y},Ct=function(e,t){return Math.abs(e.x-t.x)<r&&Math.abs(e.y-t.y)<r},It=function(e,t){return ft.x=Math.abs(e.x-t.x),ft.y=Math.abs(e.y-t.y),Math.sqrt(ft.x*ft.x+ft.y*ft.y)},_t=function(){V&&(O(V),V=null)},St=function(){$&&(V=M(St),Ht())},Tt=function(){return!("fit"===l.scaleMode&&y===a.currItem.initialZoomLevel)},Et=function(e,t){return!(!e||e===document)&&(!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Et(e.parentNode,t)))},Rt={},kt=function(e,t){return Rt.prevent=!Et(e.target,l.isClickableElement),Re("preventDragEvent",e,t,Rt),Rt.prevent},At=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Dt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Ft=function(e,t,n){if(e-H>50){var i=mt.length>2?mt.shift():{};i.x=t,i.y=n,mt.push(i),H=e}},Mt=function(){var e=fe.y-a.currItem.initialPosition.y;return 1-Math.abs(e/(he.y/2))},Ot={},Lt={},Pt=[],zt=function(e){for(;Pt.length>0;)Pt.pop();return D?(ce=0,dt.forEach(function(e){0===ce?Pt[0]=e:1===ce&&(Pt[1]=e),ce++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Pt[0]=At(e.touches[0],Ot),e.touches.length>1&&(Pt[1]=At(e.touches[1],Lt))):(Ot.x=e.pageX,Ot.y=e.pageY,Ot.id="",Pt[0]=Ot),Pt},Zt=function(e,t){var n,i,o,r,s=0,u=fe[e]+t[e],c=t[e]>0,d=yt.x+t.x,p=yt.x-pt.x;return n=u>ne.min[e]||u<ne.max[e]?l.panEndFriction:1,u=fe[e]+t[e]*n,!l.allowPanToNext&&y!==a.currItem.initialZoomLevel||(ie?"h"!==ae||"x"!==e||Y||(c?(u>ne.min[e]&&(n=l.panEndFriction,s=ne.min[e]-u,i=ne.min[e]-me[e]),(0>=i||0>p)&&Jt()>1?(r=d,0>p&&d>pt.x&&(r=pt.x)):ne.min.x!==ne.max.x&&(o=u)):(u<ne.max[e]&&(n=l.panEndFriction,s=u-ne.max[e],i=me[e]-ne.max[e]),(0>=i||p>0)&&Jt()>1?(r=d,p>0&&d<pt.x&&(r=pt.x)):ne.min.x!==ne.max.x&&(o=u))):r=d,"x"!==e)?void(oe||X||y>a.currItem.fitRatio&&(fe[e]+=t[e]*n)):(void 0!==r&&(Le(r,!0),X=r!==pt.x),ne.min.x!==ne.max.x&&(void 0!==o?fe.x=o:X||(fe.x+=t.x*n)),void 0!==r)},Nt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Xt)return void e.preventDefault();if(!W||"mousedown"!==e.type){if(kt(e,!0)&&e.preventDefault(),Re("pointerDown"),D){var t=o.arraySearch(dt,e.pointerId,"id");0>t&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=zt(e),i=n.length;Q=null,tt(),$&&1!==i||($=re=!0,o.bind(window,h,a),B=ue=se=K=X=q=G=Y=!1,ae=null,Re("firstTouchStart",n),ze(me,fe),pe.x=pe.y=0,ze(ut,n[0]),ze(ct,ut),pt.x=ye.x*ge,mt=[{x:ut.x,y:ut.y}],H=j=ke(),Be(y,!0),_t(),St()),!J&&i>1&&!oe&&!X&&(w=y,Y=!1,J=G=!0,pe.y=pe.x=0,ze(me,fe),ze(rt,n[0]),ze(st,n[1]),Dt(rt,st,bt),wt.x=Math.abs(bt.x)-fe.x,wt.y=Math.abs(bt.y)-fe.y,ee=te=It(rt,st))}}},jt=function(e){if(e.preventDefault(),D){var t=o.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if($){var i=zt(e);if(ae||q||J)Q=i;else if(yt.x!==ye.x*ge)ae="h";else{var a=Math.abs(i[0].x-ut.x)-Math.abs(i[0].y-ut.y);Math.abs(a)>=at&&(ae=a>0?"h":"v",Q=i)}}},Ht=function(){if(Q){var e=Q.length;if(0!==e)if(ze(rt,Q[0]),lt.x=rt.x-ut.x,lt.y=rt.y-ut.y,J&&e>1){if(ut.x=rt.x,ut.y=rt.y,!lt.x&&!lt.y&&xt(Q[1],st))return;ze(st,Q[1]),Y||(Y=!0,Re("zoomGestureStarted"));var t=It(rt,st),n=$t(t);n>a.currItem.initialZoomLevel+a.currItem.initialZoomLevel/15&&(ue=!0);var i=1,o=Ke(),r=We();if(o>n)if(l.pinchToClose&&!ue&&w<=a.currItem.initialZoomLevel){var s=o-n,u=1-s/(o/1.2);Ae(u),Re("onPinchClose",u),se=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>r&&(i=(n-r)/(6*o),i>1&&(i=1),n=r+i*o);0>i&&(i=0),ee=t,Dt(rt,st,gt),pe.x+=gt.x-bt.x,pe.y+=gt.y-bt.y,ze(bt,gt),fe.x=Pe("x",n),fe.y=Pe("y",n),B=n>y,y=n,Fe()}else{if(!ae)return;if(re&&(re=!1,Math.abs(lt.x)>=at&&(lt.x-=Q[0].x-ct.x),Math.abs(lt.y)>=at&&(lt.y-=Q[0].y-ct.y)),ut.x=rt.x,ut.y=rt.y,0===lt.x&&0===lt.y)return;if("v"===ae&&l.closeOnVerticalDrag&&!Tt()){pe.y+=lt.y,fe.y+=lt.y;var c=Mt();return K=!0,Re("onVerticalDrag",c),Ae(c),void Fe()}Ft(ke(),rt.x,rt.y),q=!0,ne=a.currItem.bounds;var d=Zt("x",lt);d||(Zt("y",lt),Ze(fe),Fe())}}},Ut=function(e){if(N.isOldAndroid){if(W&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout(function(){W=0},600))}Re("pointerUp"),kt(e,!1)&&e.preventDefault();var t;if(D){var n=o.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var r,s=zt(e),u=s.length;if("mouseup"===e.type&&(u=0),2===u)return Q=null,!0;1===u&&ze(ct,s[0]),0!==u||ae||oe||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Re("touchRelease",e,t));var c=-1;if(0===u&&($=!1,o.unbind(window,h,a),_t(),J?c=0:-1!==vt&&(c=ke()-vt)),vt=1===u?ke():-1,r=-1!==c&&150>c?"zoom":"swipe",J&&2>u&&(J=!1,1===u&&(r="zoomPointerUp"),Re("zoomGestureEnded")),Q=null,q||Y||oe||K)if(tt(),U||(U=Bt()),U.calculateSwipeSpeed("x"),K){var d=Mt();if(d<l.verticalDragRange)a.close();else{var p=fe.y,m=le;nt("verticalDrag",0,1,300,o.easing.cubic.out,function(e){fe.y=(a.currItem.initialPosition.y-p)*e+p,Ae((1-m)*e+m),Fe()}),Re("onVerticalDrag",1)}}else{if((X||oe)&&0===u){var f=Wt(r,U);if(f)return;r="zoomPointerUp"}if(!oe)return"swipe"!==r?void Gt():void(!X&&y>a.currItem.fitRatio&&Kt(U))}},Bt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){mt.length>1?(e=ke()-H+50,t=mt[mt.length-2][i]):(e=ke()-j,t=ct[i]),n.lastFlickOffset[i]=ut[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(fe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:fe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,fe[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){fe[e]=t,Fe()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,fe[e]+=n.distanceOffset[e])},panAnimLoop:function(){return Xe.zoomPan&&(Xe.zoomPan.raf=M(n.panAnimLoop),n.now=ke(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Fe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(fe.x=Math.round(fe.x),fe.y=Math.round(fe.y),Fe(),void Je("zoomPan")):void 0}};return n},Kt=function(e){return e.calculateSwipeSpeed("y"),ne=a.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(et("zoomPan"),e.lastNow=ke(),void e.panAnimLoop())},Wt=function(e,t){var n;oe||(ht=p);var i;if("swipe"===e){var r=ut.x-ct.x,s=t.lastFlickDist.x<10;r>ot&&(s||t.lastFlickOffset.x>20)?i=-1:-ot>r&&(s||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(p+=i,0>p?(p=l.loop?Jt()-1:0,u=!0):p>=Jt()&&(p=l.loop?0:Jt()-1,u=!0),(!u||l.loop)&&(we+=i,ge-=i,n=!0));var c,d=ye.x*ge,m=Math.abs(d-yt.x);return n||d>yt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?m/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,ht===p&&(n=!1),oe=!0,Re("mainScrollAnimStart"),nt("mainScroll",yt.x,d,c,o.easing.cubic.out,Le,function(){tt(),oe=!1,ht=-1,(n||ht!==p)&&a.updateCurrItem(),Re("mainScrollAnimComplete")}),n&&a.updateCurrItem(!0),n},$t=function(e){return 1/te*e*w},Gt=function(){var e=y,t=Ke(),n=We();t>y?e=t:y>n&&(e=n);var i,r=1,s=le;return se&&!B&&!ue&&t>y?(a.close(),!0):(se&&(i=function(e){Ae((r-s)*e+s)}),a.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};_e("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){T=e+t,E=e+n,R=e+i,k=o?e+o:""};D=N.pointerEvent,D&&N.touch&&(N.touch=!1),D?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):N.touch?(e("touch","start","move","end","cancel"),F=!0):e("mouse","down","move","up"),h=E+" "+R+" "+k,g=T,D&&!F&&(F=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),a.likelyTouchDevice=F,v[T]=Nt,v[E]=jt,v[R]=Ut,k&&(v[k]=v[R]),N.touch&&(g+=" mousedown",h+=" mousemove mouseup",v.mousedown=v[T],v.mousemove=v[E],v.mouseup=v[R]),F||(l.allowPanToNext=!1)}}});var Yt,qt,Vt,Xt,Qt,Jt,en,tn=function(t,n,i,r){Yt&&clearTimeout(Yt),Xt=!0,Vt=!0;var s;t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(p);var u=i?l.hideAnimationDuration:l.showAnimationDuration,c=function(){Je("initialZoom"),i?(a.template.removeAttribute("style"),a.bg.removeAttribute("style")):(Ae(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Re("initialZoom"+(i?"OutEnd":"InEnd"))),r&&r(),Xt=!1};if(!u||!s||void 0===s.x)return Re("initialZoom"+(i?"Out":"In")),y=t.initialZoomLevel,ze(fe,t.initialPosition),Fe(),e.style.opacity=i?0:1,Ae(1),void(u?setTimeout(function(){c()},u):c());var m=function(){var n=d,r=!a.currItem.src||a.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(y=s.w/t.w,fe.x=s.x,fe.y=s.y-P,a[r?"template":"bg"].style.opacity=.001,Fe()),et("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),r&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),Yt=setTimeout(function(){if(Re("initialZoom"+(i?"Out":"In")),i){var a=s.w/t.w,l={x:fe.x,y:fe.y},d=y,p=le,m=function(t){1===t?(y=a,fe.x=s.x,fe.y=s.y-Z):(y=(a-d)*t+d,fe.x=(s.x-l.x)*t+l.x,fe.y=(s.y-Z-l.y)*t+l.y),Fe(),r?e.style.opacity=1-t:Ae(p-t*p)};n?nt("initialZoom",0,1,u,o.easing.cubic.out,m,c):(m(1),Yt=setTimeout(c,u+20))}else y=t.initialZoomLevel,ze(fe,t.initialPosition),Fe(),Ae(1),r?e.style.opacity=1:Ae(1),Yt=setTimeout(c,u+20)},i?25:90)};m()},nn={},on=[],an={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return qt.length}},rn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((nn.x-t)/2),i.center.y=Math.round((nn.y-n)/2)+e.vGap.top,i.max.x=t>nn.x?Math.round(nn.x-t):i.center.x,i.max.y=n>nn.y?Math.round(nn.y-n)+e.vGap.top:i.center.y,i.min.x=t>nn.x?0:i.center.x,i.min.y=n>nn.y?e.vGap.top:i.center.y},ln=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Re("parseVerticalMargin",e)),nn.x=t.x,nn.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=nn.x/e.w,a=nn.y/e.h;e.fitRatio=a>o?o:a;var r=l.scaleMode;"orig"===r?n=1:"fit"===r&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=rn())}if(!n)return;return sn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=rn(),e.initialPosition=e.bounds.center,e.bounds},un=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,pn(t,i,t===a.currItem&&Ie),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},dn=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0):void 0},pn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},mn=function(){if(on.length){for(var e,t=0;t<on.length;t++)e=on[t],e.holder.index===e.index&&un(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);on=[]}};_e("Controller",{publicMethods:{lazyLoadItem:function(e){e=Se(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||I)&&(Re("gettingData",e,t),t.src&&cn(t))},initController:function(){o.extend(l,an,!0),a.items=qt=n,Qt=a.getItemAt,Jt=l.getNumItemsFn,en=l.loop,Jt()<3&&(l.loop=!1),Ee("beforeChange",function(e){var t,n=l.preload,i=null===e||e>=0,o=Math.min(n[0],Jt()),r=Math.min(n[1],Jt());for(t=1;(i?r:o)>=t;t++)a.lazyLoadItem(p+t);for(t=1;(i?o:r)>=t;t++)a.lazyLoadItem(p-t)}),Ee("initialLayout",function(){a.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(p)}),Ee("mainScrollAnimComplete",mn),Ee("initialZoomInEnd",mn),Ee("destroy",function(){for(var e,t=0;t<qt.length;t++)e=qt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);on=null})},getItemAt:function(e){return e>=0&&void 0!==qt[e]&&qt[e]},allowProgressiveImg:function(){return l.forceProgressiveLoading||!F||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Se(t));var n=a.getItemAt(e.index);n&&(n.container=null);var i,r=a.getItemAt(t);if(!r)return void(e.el.innerHTML="");Re("gettingData",t,r),e.index=t,e.item=r;var s=r.container=o.createEl("pswp__zoom-wrap");if(!r.src&&r.html&&(r.html.tagName?s.appendChild(r.html):s.innerHTML=r.html),dn(r),ln(r,he),!r.src||r.loadError||r.loaded)r.src&&!r.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=r.src,pn(r,i),un(t,r,s,i,!0));else{if(r.loadComplete=function(n){if(u){if(e&&e.index===t){if(dn(n,!0))return n.loadComplete=n.img=null,ln(n,he),Me(n),void(e.index===p&&a.updateCurrZoomItem());n.imageAppended?!Xt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):N.transform&&(oe||Xt)?on.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):un(t,n,s,n.img,oe||Xt,!0)}n.loadComplete=null,n.img=null,Re("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=r.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,r.msrc?"img":"");r.msrc&&(d.src=r.msrc),pn(r,d),s.appendChild(d),r.placeholder=d}r.loading||cn(r),a.allowProgressiveImg()&&(!Vt&&N.transform?on.push({item:r,baseDiv:s,img:r.img,index:t,holder:e}):un(t,r,s,r.img,!0,!0))}Vt||t!==p?Me(r):(ie=s.style,tn(r,i||r.img)),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var fn,hn={},gn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};_e("Tap",{publicMethods:{initTap:function(){Ee("firstTouchStart",a.onTapStart),Ee("touchRelease",a.onTapRelease),Ee("destroy",function(){hn={},fn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(fn),fn=null)},onTapRelease:function(e,t){if(t&&!q&&!G&&!Qe){var n=t;if(fn&&(clearTimeout(fn),fn=null,Ct(n,hn)))return void Re("doubleTap",n);if("mouse"===t.type)return void gn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void gn(e,t);ze(hn,n),fn=setTimeout(function(){gn(e,t),fn=null},300)}}}});var vn;_e("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(F?Ee("mouseUsed",function(){a.setupDesktopZoom()}):a.setupDesktopZoom(!0))},setupDesktopZoom:function(t){vn={};var n="wheel mousewheel DOMMouseScroll";Ee("bindEvents",function(){o.bind(e,n,a.handleMouseWheel)}),Ee("unbindEvents",function(){vn&&o.unbind(e,n,a.handleMouseWheel)}),a.mouseZoomedIn=!1;var i,r=function(){a.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),a.mouseZoomedIn=!1),1>y?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Ee("resize",r),Ee("afterChange",r),Ee("pointerDown",function(){a.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Ee("pointerUp",s),t||r()},handleMouseWheel:function(e){if(y<=a.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Qe||$?e.preventDefault():A&&Math.abs(e.deltaY)>2&&(d=!0,a.close())),!0;if(e.stopPropagation(),vn.x=0,"deltaX"in e)1===e.deltaMode?(vn.x=18*e.deltaX,vn.y=18*e.deltaY):(vn.x=e.deltaX,vn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(vn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?vn.y=-.16*e.wheelDeltaY:vn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;vn.y=e.detail}Be(y,!0);var t=fe.x-vn.x,n=fe.y-vn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),a.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:he.x/2+ve.x,y:he.y/2+ve.y};var n=l.getDoubleTapZoom(!0,a.currItem),i=y===n;a.mouseZoomedIn=!i,a.zoomTo(i?a.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var yn,wn,bn,xn,Cn,In,_n,Sn,Tn,En,Rn,kn,An={history:!0,galleryUID:1},Dn=function(){return Rn.hash.substring(1)},Fn=function(){yn&&clearTimeout(yn),bn&&clearTimeout(bn)},Mn=function(){var e=Dn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(l.galleryPIDs){var a=t.pid;for(t.pid=0,n=0;n<qt.length;n++)if(qt[n].pid===a){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},On=function(){if(bn&&clearTimeout(bn),Qe||$)return void(bn=setTimeout(On,500));xn?clearTimeout(wn):xn=!0;var e=p+1,t=Qt(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=_n+"&gid="+l.galleryUID+"&pid="+e;Sn||-1===Rn.hash.indexOf(n)&&(En=!0);var i=Rn.href.split("#")[0]+"#"+n;kn?"#"+n!==window.location.hash&&history[Sn?"replaceState":"pushState"]("",document.title,i):Sn?Rn.replace(i):Rn.hash=n,Sn=!0,wn=setTimeout(function(){xn=!1},60)};_e("History",{publicMethods:{initHistory:function(){if(o.extend(l,An,!0),l.history){Rn=window.location,En=!1,Tn=!1,Sn=!1,_n=Dn(),kn="pushState"in history,_n.indexOf("gid=")>-1&&(_n=_n.split("&gid=")[0],_n=_n.split("?gid=")[0]),Ee("afterChange",a.updateURL),Ee("unbindEvents",function(){o.unbind(window,"hashchange",a.onHashChange)});var e=function(){In=!0,Tn||(En?history.back():_n?Rn.hash=_n:kn?history.pushState("",document.title,Rn.pathname+Rn.search):Rn.hash=""),Fn()};Ee("unbindEvents",function(){d&&e()}),Ee("destroy",function(){In||e()}),Ee("firstUpdate",function(){p=Mn().pid});var t=_n.indexOf("pid=");t>-1&&(_n=_n.substring(0,t),"&"===_n.slice(-1)&&(_n=_n.slice(0,-1))),setTimeout(function(){u&&o.bind(window,"hashchange",a.onHashChange)},40)}},onHashChange:function(){return Dn()===_n?(Tn=!0,void a.close()):void(xn||(Cn=!0,a.goTo(Mn().pid),Cn=!1))},updateURL:function(){Fn(),Cn||(Sn?yn=setTimeout(On,800):On())}}}),o.extend(a,it)};return e}),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,i,o,a,r,s,l,u,c,d,p,m,f,h,g,v,y,w,b,x=this,C=!1,I=!0,_=!0,S={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},T=function(e){if(v)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!c&&P();for(var n,i,o=e.target||e.srcElement,a=o.getAttribute("class")||"",r=0;r<K.length;r++)n=K[r],n.onTap&&a.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),v=!0;var s=t.features.isOldAndroid?600:30;y=setTimeout(function(){v=!1},s)}},E=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},R=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},k=function(){var e=1===g.getNumItemsFn();e!==h&&(R(i,"ui--one-slide",e),h=e)},A=function(){R(l,"share-modal--hidden",_)},D=function(){return _=!_,_?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){_&&A()},300)):(A(),setTimeout(function(){_||t.addClass(l,"pswp__share-modal--fade-in")},30)),_||M(),!1},F=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),_||D(),!1))},M=function(){for(var e,t,n,i,o,a="",r=0;r<g.shareButtons.length;r++)e=g.shareButtons[r],n=g.getImageURLForShare(e),i=g.getPageURLForShare(e),o=g.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),a+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(a=g.parseShareButtonOut(e,a));l.children[0].innerHTML=a,l.children[0].onclick=F},O=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},L=0,P=function(){clearTimeout(b),L=0,c&&x.setIdle(!1)},z=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout(function(){x.setIdle(!0)},g.timeToIdleOutside))},Z=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=x.getFullscreenAPI()),n?(t.bind(document,n.eventK,x.updateFullscreen),x.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},N=function(){g.preloaderEl&&(j(!0),d("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&j(!1):j(!0)},g.loadingIndicatorDelay)}),d("imageLoadComplete",function(t,n){e.currItem===n&&j(!0)}))},j=function(e){m!==e&&(R(p,"preloader--active",!e),m=e)},H=function(e){var n=e.vGap;if(E()){var r=g.barsSize;if(g.captionEl&&"auto"===r.bottom)if(a||(a=t.createEl("pswp__caption pswp__caption--fake"),a.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(a,o),t.addClass(i,"pswp__ui--fit")),g.addCaptionHTMLFn(e,a,!0)){var s=a.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=r.top;else n.bottom="auto"===r.bottom?0:r.bottom;n.top=r.top}else n.top=n.bottom=0},U=function(){g.timeToIdle&&d("mouseUsed",function(){t.bind(document,"mousemove",P),t.bind(document,"mouseout",z),w=setInterval(function(){L++,2===L&&x.setIdle(!0)},g.timeToIdle/2)})},B=function(){d("onVerticalDrag",function(e){I&&.95>e?x.hideControls():!I&&e>=.95&&x.showControls()});var e;d("onPinchClose",function(t){I&&.9>t?(x.hideControls(),e=!0):e&&!I&&t>.9&&x.showControls()}),d("zoomGestureEnded",function(){e=!1,e&&!I&&x.showControls()})},K=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){D()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){D()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){r=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}],W=function(){var e,n,o,a=function(i){if(i)for(var a=i.length,r=0;a>r;r++){e=i[r],n=e.className;for(var s=0;s<K.length;s++)o=K[s],n.indexOf("pswp__"+o.name)>-1&&(g[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};a(i.children);var r=t.getChildByClass(i,"pswp__top-bar");r&&a(r.children)};x.init=function(){t.extend(e.options,S,!0),g=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,B(),d("beforeChange",x.update),d("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)}),d("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),d("bindEvents",function(){t.bind(i,"pswpTap click",T),t.bind(e.scrollWrap,"pswpTap",x.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",x.onMouseOver)}),d("unbindEvents",function(){_||D(),w&&clearInterval(w),t.unbind(document,"mouseout",z),t.unbind(document,"mousemove",P),t.unbind(i,"pswpTap click",T),t.unbind(e.scrollWrap,"pswpTap",x.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",x.onMouseOver),n&&(t.unbind(document,n.eventK,x.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)}),d("destroy",function(){g.captionEl&&(a&&i.removeChild(a),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),x.setIdle(!1)}),g.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",function(){g.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),d("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),d("parseVerticalMargin",H),W(),g.shareEl&&s&&l&&(_=!0),k(),U(),Z(),N()},x.setIdle=function(e){c=e,R(i,"ui--idle",e)},x.update=function(){I&&e.currItem?(x.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,o),R(o,"caption--empty",!e.currItem.title)),C=!0):C=!1,_||D(),k()},x.updateFullscreen=function(i){i&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},x.updateIndexIndicator=function(){g.counterEl&&(r.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},x.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(O(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(I?x.hideControls():x.showControls()),g.tapToClose&&(t.hasClass(i,"pswp__img")||O(i)))return void e.close()},x.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;R(i,"ui--over-close",O(t))},x.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),I=!1},x.showControls=function(){I=!0,C||x.update(),t.removeClass(i,"pswp__ui--hidden")},x.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},x.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",
eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e}),!function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,o){"function"==typeof define&&define.amd?define(o):"object"===("undefined"==typeof n?"undefined":i(n))?t.exports=o():e.PhotoSwipeUI_Default=o()}(void 0,function(){var e=function(e,t){var n,i,o,a,r,s,l,u,c,d,p,m,f,h,g,v,y,w,b,x=this,C=!1,I=!0,_=!0,S={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},T=function(e){if(v)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!c&&P();for(var n,i,o=e.target||e.srcElement,a=o.getAttribute("class")||"",r=0;r<K.length;r++)n=K[r],n.onTap&&a.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),v=!0;var s=t.features.isOldAndroid?600:30;y=setTimeout(function(){v=!1},s)}},E=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},R=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},k=function(){var e=1===g.getNumItemsFn();e!==h&&(R(i,"ui--one-slide",e),h=e)},A=function(){R(l,"share-modal--hidden",_)},D=function(){return _=!_,_?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){_&&A()},300)):(A(),setTimeout(function(){_||t.addClass(l,"pswp__share-modal--fade-in")},30)),_||M(),!1},F=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),_||D(),1))},M=function(){for(var e,t,n,i,o,a="",r=0;r<g.shareButtons.length;r++)e=g.shareButtons[r],n=g.getImageURLForShare(e),i=g.getPageURLForShare(e),o=g.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),a+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(a=g.parseShareButtonOut(e,a));l.children[0].innerHTML=a,l.children[0].onclick=F},O=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},L=0,P=function(){clearTimeout(b),L=0,c&&x.setIdle(!1)},z=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout(function(){x.setIdle(!0)},g.timeToIdleOutside))},Z=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=x.getFullscreenAPI()),n?(t.bind(document,n.eventK,x.updateFullscreen),x.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},N=function(){g.preloaderEl&&(j(!0),d("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&j(!1):j(!0)},g.loadingIndicatorDelay)}),d("imageLoadComplete",function(t,n){e.currItem===n&&j(!0)}))},j=function(e){m!==e&&(R(p,"preloader--active",!e),m=e)},H=function(e){var n=e.vGap;if(E()){var r=g.barsSize;if(g.captionEl&&"auto"===r.bottom)if(a||(a=t.createEl("pswp__caption pswp__caption--fake"),a.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(a,o),t.addClass(i,"pswp__ui--fit")),g.addCaptionHTMLFn(e,a,!0)){var s=a.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=r.top;else n.bottom="auto"===r.bottom?0:r.bottom;n.top=r.top}else n.top=n.bottom=0},U=function(){g.timeToIdle&&d("mouseUsed",function(){t.bind(document,"mousemove",P),t.bind(document,"mouseout",z),w=setInterval(function(){L++,2===L&&x.setIdle(!0)},g.timeToIdle/2)})},B=function(){d("onVerticalDrag",function(e){I&&e<.95?x.hideControls():!I&&e>=.95&&x.showControls()});var e;d("onPinchClose",function(t){I&&t<.9?(x.hideControls(),e=!0):e&&!I&&t>.9&&x.showControls()}),d("zoomGestureEnded",function(){e=!1,e&&!I&&x.showControls()})},K=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){D()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){D()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){r=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}],W=function(){var e,n,o,a=function(i){if(i)for(var a=i.length,r=0;r<a;r++){e=i[r],n=e.className;for(var s=0;s<K.length;s++)o=K[s],n.indexOf("pswp__"+o.name)>-1&&(g[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};a(i.children);var r=t.getChildByClass(i,"pswp__top-bar");r&&a(r.children)};x.init=function(){t.extend(e.options,S,!0),g=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,B(),d("beforeChange",x.update),d("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)}),d("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),d("bindEvents",function(){t.bind(i,"pswpTap click",T),t.bind(e.scrollWrap,"pswpTap",x.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",x.onMouseOver)}),d("unbindEvents",function(){_||D(),w&&clearInterval(w),t.unbind(document,"mouseout",z),t.unbind(document,"mousemove",P),t.unbind(i,"pswpTap click",T),t.unbind(e.scrollWrap,"pswpTap",x.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",x.onMouseOver),n&&(t.unbind(document,n.eventK,x.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)}),d("destroy",function(){g.captionEl&&(a&&i.removeChild(a),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),x.setIdle(!1)}),g.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",function(){g.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),d("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),d("parseVerticalMargin",H),W(),g.shareEl&&s&&l&&(_=!0),k(),U(),Z(),N()},x.setIdle=function(e){c=e,R(i,"ui--idle",e)},x.update=function(){I&&e.currItem?(x.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,o),R(o,"caption--empty",!e.currItem.title)),C=!0):C=!1,_||D(),k()},x.updateFullscreen=function(i){i&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},x.updateIndexIndicator=function(){g.counterEl&&(r.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},x.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(O(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(I?x.hideControls():x.showControls()),g.tapToClose&&(t.hasClass(i,"pswp__img")||O(i)))return void e.close()},x.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;R(i,"ui--over-close",O(t))},x.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),I=!1},x.showControls=function(){I=!0,C||x.update(),t.removeClass(i,"pswp__ui--hidden")},x.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},x.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e})},{}],2:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,o){"function"==typeof define&&define.amd?define(o):"object"===("undefined"==typeof n?"undefined":i(n))?t.exports=o():e.PhotoSwipe=o()}(void 0,function(){var e=function(e,t,n,o){var a={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){a.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){a.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(a.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(a.features)return a.features;var e=a.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10),r>=1&&r<8&&(i.isOldIOSPhone=!0))}var s=o.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;l=parseFloat(l),l>=1&&(l<4.4&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var u,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],m=0;m<4;m++){n=p[m];for(var f=0;f<3;f++)u=d[f],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var h=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),i=window.setTimeout(function(){e(t+n)},n);return h=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a.features=i,i}};a.detectFeatures(),a.features.oldIE&&(a.bind=function(e,t,n,o){t=t.split(" ");for(var a,r=(o?"detach":"attach")+"Event",s=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(a=t[l])if("object"===("undefined"==typeof n?"undefined":i(n))&&n.handleEvent){if(o){if(!n["oldIE"+a])return!1}else n["oldIE"+a]=s;e[r]("on"+a,n["oldIE"+a])}else e[r]("on"+a,n)});var r=this,s=25,l=3,u={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};a.extend(u,o);var c,d,p,m,f,h,g,v,y,w,b,x,C,I,_,S,T,E,R,k,A,D,F,M,O,L,P,z,Z,N,j,H,U,B,K,W,$,G,Y,q,V,X,Q,J,ee,te,ne,ie,oe,ae,re,se,le,ue,ce,de,pe=function(){return{x:0,y:0}},me=pe(),fe=pe(),he=pe(),ge={},ve=0,ye={},we=pe(),be=0,xe=!0,Ce=[],Ie={},_e=!1,Se=function(e,t){a.extend(r,t.publicMethods),Ce.push(e)},Te=function(e){var t=en();return e>t-1?e-t:e<0?t+e:e},Ee={},Re=function(e,t){return Ee[e]||(Ee[e]=[]),Ee[e].push(t)},ke=function(e){var t=Ee[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(r,n)}},Ae=function(){return(new Date).getTime()},De=function(e){ue=e,r.bg.style.opacity=e*u.bgOpacity},Fe=function(e,t,n,i,o){(!_e||o&&o!==r.currItem)&&(i/=o?o.fitRatio:r.currItem.fitRatio),e[D]=x+t+"px, "+n+"px"+C+" scale("+i+")"},Me=function(e){oe&&(e&&(w>r.currItem.fitRatio?_e||(mn(r.currItem,!1,!0),_e=!0):_e&&(mn(r.currItem),_e=!1)),Fe(oe,he.x,he.y,w))},Oe=function(e){e.container&&Fe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Le=function(e,t){t[D]=x+e+"px, 0px"+C},Pe=function(e,t){if(!u.loop&&t){var n=m+(we.x*ve-e)/we.x,i=Math.round(e-wt.x);(n<0&&i>0||n>=en()-1&&i<0)&&(e=wt.x+i*u.mainScrollEndFriction)}wt.x=e,Le(e,f)},ze=function(e,t){var n=bt[e]-ye[e];return fe[e]+me[e]+n-n*(t/b)},Ze=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ne=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},je=null,He=function Pn(){je&&(a.unbind(document,"mousemove",Pn),a.addClass(e,"pswp--has_mouse"),u.mouseUsed=!0,ke("mouseUsed")),je=setTimeout(function(){je=null},100)},Ue=function(){a.bind(document,"keydown",r),j.transform&&a.bind(r.scrollWrap,"click",r),u.mouseUsed||a.bind(document,"mousemove",He),a.bind(window,"resize scroll",r),ke("bindEvents")},Be=function(){a.unbind(window,"resize",r),a.unbind(window,"scroll",y.scroll),a.unbind(document,"keydown",r),a.unbind(document,"mousemove",He),j.transform&&a.unbind(r.scrollWrap,"click",r),G&&a.unbind(window,g,r),ke("unbindEvents")},Ke=function(e,t){var n=un(r.currItem,ge,e);return t&&(ie=n),n},We=function(e){return e||(e=r.currItem),e.initialZoomLevel},$e=function(e){return e||(e=r.currItem),e.w>0?u.maxSpreadZoom:1},Ge=function(e,t,n,i){return i===r.currItem.initialZoomLevel?(n[e]=r.currItem.initialPosition[e],!0):(n[e]=ze(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ye=function(){if(D){var t=j.perspective&&!M;return x="translate"+(t?"3d(":"("),void(C=j.perspective?", 0px)":")")}D="left",a.addClass(e,"pswp--ie"),Le=function(e,t){t.left=e+"px"},Oe=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Me=function(){if(oe){var e=oe,t=r.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=he.x+"px",e.top=he.y+"px"}}},qe=function(e){var t="";u.escKey&&27===e.keyCode?t="close":u.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,r[t]()))},Ve=function(e){e&&(V||q||ae||W)&&(e.preventDefault(),e.stopPropagation())},Xe=function(){r.setScrollOffset(0,a.getScrollY())},Qe={},Je=0,et=function(e){Qe[e]&&(Qe[e].raf&&L(Qe[e].raf),Je--,delete Qe[e])},tt=function(e){Qe[e]&&et(e),Qe[e]||(Je++,Qe[e]={})},nt=function(){for(var e in Qe)Qe.hasOwnProperty(e)&&et(e)},it=function(e,t,n,i,o,a,r){var s,l=Ae();tt(e);var u=function c(){if(Qe[e]){if(s=Ae()-l,s>=i)return et(e),a(n),void(r&&r());a((n-t)*o(s/i)+t),Qe[e].raf=O(c)}};u()},ot={shout:ke,listen:Re,viewportSize:ge,options:u,isMainScrollAnimating:function(){return ae},getZoomLevel:function(){return w},getCurrentIndex:function(){return m},isDragging:function(){return G},isZooming:function(){return ee},setScrollOffset:function(e,t){ye.x=e,N=ye.y=t,ke("updateScrollOffset",ye)},applyZoomPan:function(e,t,n,i){he.x=t,he.y=n,w=e,Me(i)},init:function(){if(!c&&!d){var n;r.framework=a,r.template=e,r.bg=a.getChildByClass(e,"pswp__bg"),P=e.className,c=!0,j=a.detectFeatures(),O=j.raf,L=j.caf,D=j.transform,Z=j.oldIE,r.scrollWrap=a.getChildByClass(e,"pswp__scroll-wrap"),r.container=a.getChildByClass(r.scrollWrap,"pswp__container"),f=r.container.style,r.itemHolders=S=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}],S[0].el.style.display=S[2].el.style.display="none",Ye(),y={resize:r.updateSize,scroll:Xe,keydown:qe,click:Ve};var i=j.isOldIOSPhone||j.isOldAndroid||j.isMobileOpera;for(j.animationName&&j.transform&&!i||(u.showAnimationDuration=u.hideAnimationDuration=0),n=0;n<Ce.length;n++)r["init"+Ce[n]]();if(t){var o=r.ui=new t(r,a);o.init()}ke("firstUpdate"),m=m||u.index||0,(isNaN(m)||m<0||m>=en())&&(m=0),r.currItem=Jt(m),(j.isOldIOSPhone||j.isOldAndroid)&&(xe=!1),e.setAttribute("aria-hidden","false"),u.modal&&(xe?e.style.position="fixed":(e.style.position="absolute",e.style.top=a.getScrollY()+"px")),void 0===N&&(ke("initialLayout"),N=z=a.getScrollY());var s="pswp--open ";for(u.mainClass&&(s+=u.mainClass+" "),u.showHideOpacity&&(s+="pswp--animate_opacity "),s+=M?"pswp--touch":"pswp--notouch",s+=j.animationName?" pswp--css_animation":"",s+=j.svg?" pswp--svg":"",a.addClass(e,s),r.updateSize(),h=-1,be=null,n=0;n<l;n++)Le((n+h)*we.x,S[n].el.style);Z||a.bind(r.scrollWrap,v,r),Re("initialZoomInEnd",function(){r.setContent(S[0],m-1),r.setContent(S[2],m+1),S[0].el.style.display=S[2].el.style.display="block",u.focus&&e.focus(),Ue()}),r.setContent(S[1],m),r.updateCurrItem(),ke("afterInit"),xe||(I=setInterval(function(){Je||G||ee||w!==r.currItem.initialZoomLevel||r.updateSize()},1e3)),a.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,d=!0,ke("close"),Be(),nn(r.currItem,null,!0,r.destroy))},destroy:function(){ke("destroy"),qt&&clearTimeout(qt),e.setAttribute("aria-hidden","true"),e.className=P,I&&clearInterval(I),a.unbind(r.scrollWrap,v,r),a.unbind(window,"scroll",r),St(),nt(),Ee=null},panTo:function(e,t,n){n||(e>ie.min.x?e=ie.min.x:e<ie.max.x&&(e=ie.max.x),t>ie.min.y?t=ie.min.y:t<ie.max.y&&(t=ie.max.y)),he.x=e,he.y=t,Me()},handleEvent:function(e){e=e||window.event,y[e.type]&&y[e.type](e)},goTo:function(e){e=Te(e);var t=e-m;be=t,m=e,r.currItem=Jt(m),ve-=t,Pe(we.x*ve),nt(),ae=!1,r.updateCurrItem()},next:function(){r.goTo(m+1)},prev:function(){r.goTo(m-1)},updateCurrZoomItem:function(e){if(e&&ke("beforeChange",0),S[1].el.children.length){var t=S[1].el.children[0];oe=a.hasClass(t,"pswp__zoom-wrap")?t.style:null}else oe=null;ie=r.currItem.bounds,b=w=r.currItem.initialZoomLevel,he.x=ie.center.x,he.y=ie.center.y,e&&ke("afterChange")},invalidateCurrItems:function(){_=!0;for(var e=0;e<l;e++)S[e].item&&(S[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=Math.abs(be);if(!(e&&n<2)){r.currItem=Jt(m),_e=!1,ke("beforeChange",be),n>=l&&(h+=be+(be>0?-l:l),n=l);for(var i=0;i<n;i++)be>0?(t=S.shift(),S[l-1]=t,h++,Le((h+2)*we.x,t.el.style),r.setContent(t,m-n+i+1+1)):(t=S.pop(),S.unshift(t),h--,Le(h*we.x,t.el.style),r.setContent(t,m+n-i-1-1));if(oe&&1===Math.abs(be)){var o=Jt(T);o.initialZoomLevel!==w&&(un(o,ge),mn(o),Oe(o))}be=0,r.updateCurrZoomItem(),T=m,ke("afterChange")}}},updateSize:function(t){if(!xe&&u.modal){var n=a.getScrollY();if(N!==n&&(e.style.top=n+"px",N=n),!t&&Ie.x===window.innerWidth&&Ie.y===window.innerHeight)return;Ie.x=window.innerWidth,Ie.y=window.innerHeight,e.style.height=Ie.y+"px"}if(ge.x=r.scrollWrap.clientWidth,ge.y=r.scrollWrap.clientHeight,Xe(),we.x=ge.x+Math.round(ge.x*u.spacing),we.y=ge.y,Pe(we.x*ve),ke("beforeResize"),void 0!==h){for(var i,o,s,c=0;c<l;c++)i=S[c],Le((c+h)*we.x,i.el.style),s=m+c-1,u.loop&&en()>2&&(s=Te(s)),o=Jt(s),o&&(_||o.needsUpdate||!o.bounds)?(r.cleanSlide(o),r.setContent(i,s),1===c&&(r.currItem=o,r.updateCurrZoomItem(!0)),o.needsUpdate=!1):i.index===-1&&s>=0&&r.setContent(i,s),o&&o.container&&(un(o,ge),mn(o),Oe(o));_=!1}b=w=r.currItem.initialZoomLevel,ie=r.currItem.bounds,ie&&(he.x=ie.center.x,he.y=ie.center.y,Me(!0)),ke("resize")},zoomTo:function(e,t,n,i,o){t&&(b=w,bt.x=Math.abs(t.x)-he.x,bt.y=Math.abs(t.y)-he.y,Ze(fe,he));var r=Ke(e,!1),s={};Ge("x",r,s,e),Ge("y",r,s,e);var l=w,u={x:he.x,y:he.y};Ne(s);var c=function(t){1===t?(w=e,he.x=s.x,he.y=s.y):(w=(e-l)*t+l,he.x=(s.x-u.x)*t+u.x,he.y=(s.y-u.y)*t+u.y),o&&o(t),Me(1===t)};n?it("customZoomTo",0,1,n,i||a.easing.sine.inOut,c):c(1)}},at=30,rt=10,st={},lt={},ut={},ct={},dt={},pt=[],mt={},ft=[],ht={},gt=0,vt=pe(),yt=0,wt=pe(),bt=pe(),xt=pe(),Ct=function(e,t){return e.x===t.x&&e.y===t.y},It=function(e,t){return Math.abs(e.x-t.x)<s&&Math.abs(e.y-t.y)<s},_t=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},St=function(){X&&(L(X),X=null)},Tt=function zn(){G&&(X=O(zn),Ut())},Et=function(){return!("fit"===u.scaleMode&&w===r.currItem.initialZoomLevel)},Rt=function Zn(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Zn(e.parentNode,t))},kt={},At=function(e,t){return kt.prevent=!Rt(e.target,u.isClickableElement),ke("preventDragEvent",e,t,kt),kt.prevent},Dt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ft=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Mt=function(e,t,n){if(e-U>50){var i=ft.length>2?ft.shift():{};i.x=t,i.y=n,ft.push(i),U=e}},Ot=function(){var e=he.y-r.currItem.initialPosition.y;return 1-Math.abs(e/(ge.y/2))},Lt={},Pt={},zt=[],Zt=function(e){for(;zt.length>0;)zt.pop();return F?(de=0,pt.forEach(function(e){0===de?zt[0]=e:1===de&&(zt[1]=e),de++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(zt[0]=Dt(e.touches[0],Lt),e.touches.length>1&&(zt[1]=Dt(e.touches[1],Pt))):(Lt.x=e.pageX,Lt.y=e.pageY,Lt.id="",zt[0]=Lt),zt},Nt=function(e,t){var n,i,o,a,s=0,l=he[e]+t[e],c=t[e]>0,d=wt.x+t.x,p=wt.x-mt.x;return n=l>ie.min[e]||l<ie.max[e]?u.panEndFriction:1,l=he[e]+t[e]*n,!u.allowPanToNext&&w!==r.currItem.initialZoomLevel||(oe?"h"!==re||"x"!==e||q||(c?(l>ie.min[e]&&(n=u.panEndFriction,s=ie.min[e]-l,i=ie.min[e]-fe[e]),(i<=0||p<0)&&en()>1?(a=d,p<0&&d>mt.x&&(a=mt.x)):ie.min.x!==ie.max.x&&(o=l)):(l<ie.max[e]&&(n=u.panEndFriction,s=l-ie.max[e],i=fe[e]-ie.max[e]),(i<=0||p>0)&&en()>1?(a=d,p>0&&d<mt.x&&(a=mt.x)):ie.min.x!==ie.max.x&&(o=l))):a=d,"x"!==e)?void(ae||Q||w>r.currItem.fitRatio&&(he[e]+=t[e]*n)):(void 0!==a&&(Pe(a,!0),Q=a!==mt.x),ie.min.x!==ie.max.x&&(void 0!==o?he.x=o:Q||(he.x+=t.x*n)),void 0!==a)},jt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Qt)return void e.preventDefault();if(!$||"mousedown"!==e.type){if(At(e,!0)&&e.preventDefault(),ke("pointerDown"),F){var t=a.arraySearch(pt,e.pointerId,"id");t<0&&(t=pt.length),pt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Zt(e),i=n.length;J=null,nt(),G&&1!==i||(G=se=!0,a.bind(window,g,r),K=ce=le=W=Q=V=Y=q=!1,re=null,ke("firstTouchStart",n),Ze(fe,he),me.x=me.y=0,Ze(ct,n[0]),Ze(dt,ct),mt.x=we.x*ve,ft=[{x:ct.x,y:ct.y}],U=H=Ae(),Ke(w,!0),St(),Tt()),!ee&&i>1&&!ae&&!Q&&(b=w,q=!1,ee=Y=!0,me.y=me.x=0,Ze(fe,he),Ze(st,n[0]),Ze(lt,n[1]),Ft(st,lt,xt),bt.x=Math.abs(xt.x)-he.x,bt.y=Math.abs(xt.y)-he.y,te=ne=_t(st,lt))}}},Ht=function(e){if(e.preventDefault(),F){var t=a.arraySearch(pt,e.pointerId,"id");if(t>-1){var n=pt[t];n.x=e.pageX,n.y=e.pageY}}if(G){var i=Zt(e);if(re||V||ee)J=i;else if(wt.x!==we.x*ve)re="h";else{var o=Math.abs(i[0].x-ct.x)-Math.abs(i[0].y-ct.y);Math.abs(o)>=rt&&(re=o>0?"h":"v",J=i)}}},Ut=function(){if(J){var e=J.length;if(0!==e)if(Ze(st,J[0]),ut.x=st.x-ct.x,ut.y=st.y-ct.y,ee&&e>1){if(ct.x=st.x,ct.y=st.y,!ut.x&&!ut.y&&Ct(J[1],lt))return;Ze(lt,J[1]),q||(q=!0,ke("zoomGestureStarted"));var t=_t(st,lt),n=Gt(t);n>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15&&(ce=!0);var i=1,o=We(),a=$e();if(n<o)if(u.pinchToClose&&!ce&&b<=r.currItem.initialZoomLevel){var s=o-n,l=1-s/(o/1.2);De(l),ke("onPinchClose",l),le=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>a&&(i=(n-a)/(6*o),i>1&&(i=1),n=a+i*o);i<0&&(i=0),te=t,Ft(st,lt,vt),me.x+=vt.x-xt.x,me.y+=vt.y-xt.y,Ze(xt,vt),he.x=ze("x",n),he.y=ze("y",n),K=n>w,w=n,Me()}else{if(!re)return;if(se&&(se=!1,Math.abs(ut.x)>=rt&&(ut.x-=J[0].x-dt.x),Math.abs(ut.y)>=rt&&(ut.y-=J[0].y-dt.y)),ct.x=st.x,ct.y=st.y,0===ut.x&&0===ut.y)return;if("v"===re&&u.closeOnVerticalDrag&&!Et()){me.y+=ut.y,he.y+=ut.y;var c=Ot();return W=!0,ke("onVerticalDrag",c),De(c),void Me()}Mt(Ae(),st.x,st.y),V=!0,ie=r.currItem.bounds;var d=Nt("x",ut);d||(Nt("y",ut),Ne(he),Me())}}},Bt=function(e){if(j.isOldAndroid){if($&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout($),$=setTimeout(function(){$=0},600))}ke("pointerUp"),At(e,!1)&&e.preventDefault();var t;if(F){var n=a.arraySearch(pt,e.pointerId,"id");if(n>-1)if(t=pt.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var o,s=Zt(e),l=s.length;if("mouseup"===e.type&&(l=0),2===l)return J=null,!0;1===l&&Ze(dt,s[0]),0!==l||re||ae||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),ke("touchRelease",e,t));var c=-1;if(0===l&&(G=!1,a.unbind(window,g,r),St(),ee?c=0:yt!==-1&&(c=Ae()-yt)),yt=1===l?Ae():-1,o=c!==-1&&c<150?"zoom":"swipe",ee&&l<2&&(ee=!1,1===l&&(o="zoomPointerUp"),ke("zoomGestureEnded")),J=null,V||q||ae||W)if(nt(),B||(B=Kt()),B.calculateSwipeSpeed("x"),W){var d=Ot();if(d<u.verticalDragRange)r.close();else{var p=he.y,m=ue;it("verticalDrag",0,1,300,a.easing.cubic.out,function(e){he.y=(r.currItem.initialPosition.y-p)*e+p,De((1-m)*e+m),Me()}),ke("onVerticalDrag",1)}}else{if((Q||ae)&&0===l){var f=$t(o,B);if(f)return;o="zoomPointerUp"}if(!ae)return"swipe"!==o?void Yt():void(!Q&&w>r.currItem.fitRatio&&Wt(B))}},Kt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ft.length>1?(e=Ae()-U+50,t=ft[ft.length-2][i]):(e=Ae()-H,t=dt[i]),n.lastFlickOffset[i]=ct[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(he[e]>ie.min[e]?n.backAnimDestination[e]=ie.min[e]:he[e]<ie.max[e]&&(n.backAnimDestination[e]=ie.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,it("bounceZoomPan"+e,he[e],n.backAnimDestination[e],t||300,a.easing.sine.out,function(t){he[e]=t,Me()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,he[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Qe.zoomPan&&(Qe.zoomPan.raf=O(n.panAnimLoop),n.now=Ae(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Me(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return he.x=Math.round(he.x),he.y=Math.round(he.y),Me(),void et("zoomPan")}};return n},Wt=function(e){return e.calculateSwipeSpeed("y"),ie=r.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(tt("zoomPan"),e.lastNow=Ae(),void e.panAnimLoop())},$t=function(e,t){var n;ae||(gt=m);var i;if("swipe"===e){var o=ct.x-dt.x,s=t.lastFlickDist.x<10;o>at&&(s||t.lastFlickOffset.x>20)?i=-1:o<-at&&(s||t.lastFlickOffset.x<-20)&&(i=1)}var l;i&&(m+=i,m<0?(m=u.loop?en()-1:0,l=!0):m>=en()&&(m=u.loop?0:en()-1,l=!0),l&&!u.loop||(be+=i,ve-=i,n=!0));var c,d=we.x*ve,p=Math.abs(d-wt.x);return n||d>wt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,gt===m&&(n=!1),ae=!0,ke("mainScrollAnimStart"),it("mainScroll",wt.x,d,c,a.easing.cubic.out,Pe,function(){nt(),ae=!1,gt=-1,(n||gt!==m)&&r.updateCurrItem(),ke("mainScrollAnimComplete")}),n&&r.updateCurrItem(!0),n},Gt=function(e){return 1/ne*e*b},Yt=function(){var e=w,t=We(),n=$e();w<t?e=t:w>n&&(e=n);var i,o=1,s=ue;return le&&!K&&!ce&&w<t?(r.close(),!0):(le&&(i=function(e){De((o-s)*e+s)}),r.zoomTo(e,0,200,a.easing.cubic.out,i),!0)};Se("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){E=e+t,R=e+n,k=e+i,A=o?e+o:""};F=j.pointerEvent,F&&j.touch&&(j.touch=!1),F?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):j.touch?(e("touch","start","move","end","cancel"),
M=!0):e("mouse","down","move","up"),g=R+" "+k+" "+A,v=E,F&&!M&&(M=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),r.likelyTouchDevice=M,y[E]=jt,y[R]=Ht,y[k]=Bt,A&&(y[A]=y[k]),j.touch&&(v+=" mousedown",g+=" mousemove mouseup",y.mousedown=y[E],y.mousemove=y[R],y.mouseup=y[k]),M||(u.allowPanToNext=!1)}}});var qt,Vt,Xt,Qt,Jt,en,tn,nn=function(t,n,i,o){qt&&clearTimeout(qt),Qt=!0,Xt=!0;var s;t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=u.getThumbBoundsFn&&u.getThumbBoundsFn(m);var l=i?u.hideAnimationDuration:u.showAnimationDuration,c=function(){et("initialZoom"),i?(r.template.removeAttribute("style"),r.bg.removeAttribute("style")):(De(1),n&&(n.style.display="block"),a.addClass(e,"pswp--animated-in"),ke("initialZoom"+(i?"OutEnd":"InEnd"))),o&&o(),Qt=!1};if(!l||!s||void 0===s.x)return ke("initialZoom"+(i?"Out":"In")),w=t.initialZoomLevel,Ze(he,t.initialPosition),Me(),e.style.opacity=i?0:1,De(1),void(l?setTimeout(function(){c()},l):c());var d=function(){var n=p,o=!r.currItem.src||r.currItem.loadError||u.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(w=s.w/t.w,he.x=s.x,he.y=s.y-z,r[o?"template":"bg"].style.opacity=.001,Me()),tt("initialZoom"),i&&!n&&a.removeClass(e,"pswp--animated-in"),o&&(i?a[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){a.addClass(e,"pswp--animate_opacity")},30)),qt=setTimeout(function(){if(ke("initialZoom"+(i?"Out":"In")),i){var r=s.w/t.w,u={x:he.x,y:he.y},d=w,p=ue,m=function(t){1===t?(w=r,he.x=s.x,he.y=s.y-N):(w=(r-d)*t+d,he.x=(s.x-u.x)*t+u.x,he.y=(s.y-N-u.y)*t+u.y),Me(),o?e.style.opacity=1-t:De(p-t*p)};n?it("initialZoom",0,1,l,a.easing.cubic.out,m,c):(m(1),qt=setTimeout(c,l+20))}else w=t.initialZoomLevel,Ze(he,t.initialPosition),Me(),De(1),o?e.style.opacity=1:De(1),qt=setTimeout(c,l+20)},i?25:90)};d()},on={},an=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Vt.length}},sn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},ln=function(e,t,n){var i=e.bounds;i.center.x=Math.round((on.x-t)/2),i.center.y=Math.round((on.y-n)/2)+e.vGap.top,i.max.x=t>on.x?Math.round(on.x-t):i.center.x,i.max.y=n>on.y?Math.round(on.y-n)+e.vGap.top:i.center.y,i.min.x=t>on.x?0:i.center.x,i.min.y=n>on.y?e.vGap.top:i.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),ke("parseVerticalMargin",e)),on.x=t.x,on.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=on.x/e.w,a=on.y/e.h;e.fitRatio=o<a?o:a;var r=u.scaleMode;"orig"===r?n=1:"fit"===r&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=sn())}if(!n)return;return ln(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=sn(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,i,o,a){t.loadError||i&&(t.imageAppended=!0,mn(t,i,t===r.currItem&&_e),n.appendChild(i),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},dn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=a.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},pn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=u.errorMsg.replace("%url%",e.src),!0},mn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},fn=function(){if(an.length){for(var e,t=0;t<an.length;t++)e=an[t],e.holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);an=[]}};Se("Controller",{publicMethods:{lazyLoadItem:function(e){e=Te(e);var t=Jt(e);t&&(!t.loaded&&!t.loading||_)&&(ke("gettingData",e,t),t.src&&dn(t))},initController:function(){a.extend(u,rn,!0),r.items=Vt=n,Jt=r.getItemAt,en=u.getNumItemsFn,tn=u.loop,en()<3&&(u.loop=!1),Re("beforeChange",function(e){var t,n=u.preload,i=null===e||e>=0,o=Math.min(n[0],en()),a=Math.min(n[1],en());for(t=1;t<=(i?a:o);t++)r.lazyLoadItem(m+t);for(t=1;t<=(i?o:a);t++)r.lazyLoadItem(m-t)}),Re("initialLayout",function(){r.currItem.initialLayout=u.getThumbBoundsFn&&u.getThumbBoundsFn(m)}),Re("mainScrollAnimComplete",fn),Re("initialZoomInEnd",fn),Re("destroy",function(){for(var e,t=0;t<Vt.length;t++)e=Vt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);an=null})},getItemAt:function(e){return e>=0&&void 0!==Vt[e]&&Vt[e]},allowProgressiveImg:function(){return u.forceProgressiveLoading||!M||u.mouseUsed||screen.width>1200},setContent:function(e,t){u.loop&&(t=Te(t));var n=r.getItemAt(e.index);n&&(n.container=null);var i,o=r.getItemAt(t);if(!o)return void(e.el.innerHTML="");ke("gettingData",t,o),e.index=t,e.item=o;var s=o.container=a.createEl("pswp__zoom-wrap");if(!o.src&&o.html&&(o.html.tagName?s.appendChild(o.html):s.innerHTML=o.html),pn(o),un(o,ge),!o.src||o.loadError||o.loaded)o.src&&!o.loadError&&(i=a.createEl("pswp__img","img"),i.style.opacity=1,i.src=o.src,mn(o,i),cn(t,o,s,i,!0));else{if(o.loadComplete=function(n){if(c){if(e&&e.index===t){if(pn(n,!0))return n.loadComplete=n.img=null,un(n,ge),Oe(n),void(e.index===m&&r.updateCurrZoomItem());n.imageAppended?!Qt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):j.transform&&(ae||Qt)?an.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,s,n.img,ae||Qt,!0)}n.loadComplete=null,n.img=null,ke("imageLoadComplete",t,n)}},a.features.transform){var l="pswp__img pswp__img--placeholder";l+=o.msrc?"":" pswp__img--placeholder--blank";var d=a.createEl(l,o.msrc?"img":"");o.msrc&&(d.src=o.msrc),mn(o,d),s.appendChild(d),o.placeholder=d}o.loading||dn(o),r.allowProgressiveImg()&&(!Xt&&j.transform?an.push({item:o,baseDiv:s,img:o.img,index:t,holder:e}):cn(t,o,s,o.img,!0,!0))}Xt||t!==m?Oe(o):(oe=s.style,nn(o,i||o.img)),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hn,gn={},vn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Se("Tap",{publicMethods:{initTap:function(){Re("firstTouchStart",r.onTapStart),Re("touchRelease",r.onTapRelease),Re("destroy",function(){gn={},hn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(e,t){if(t&&!V&&!Y&&!Je){var n=t;if(hn&&(clearTimeout(hn),hn=null,It(n,gn)))return void ke("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||a.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);Ze(gn,n),hn=setTimeout(function(){vn(e,t),hn=null},300)}}}});var yn;Se("DesktopZoom",{publicMethods:{initDesktopZoom:function(){Z||(M?Re("mouseUsed",function(){r.setupDesktopZoom()}):r.setupDesktopZoom(!0))},setupDesktopZoom:function(t){yn={};var n="wheel mousewheel DOMMouseScroll";Re("bindEvents",function(){a.bind(e,n,r.handleMouseWheel)}),Re("unbindEvents",function(){yn&&a.unbind(e,n,r.handleMouseWheel)}),r.mouseZoomedIn=!1;var i,o=function(){r.mouseZoomedIn&&(a.removeClass(e,"pswp--zoomed-in"),r.mouseZoomedIn=!1),w<1?a.addClass(e,"pswp--zoom-allowed"):a.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(a.removeClass(e,"pswp--dragging"),i=!1)};Re("resize",o),Re("afterChange",o),Re("pointerDown",function(){r.mouseZoomedIn&&(i=!0,a.addClass(e,"pswp--dragging"))}),Re("pointerUp",s),t||o()},handleMouseWheel:function(e){if(w<=r.currItem.fitRatio)return u.modal&&(!u.closeOnScroll||Je||G?e.preventDefault():D&&Math.abs(e.deltaY)>2&&(p=!0,r.close())),!0;if(e.stopPropagation(),yn.x=0,"deltaX"in e)1===e.deltaMode?(yn.x=18*e.deltaX,yn.y=18*e.deltaY):(yn.x=e.deltaX,yn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(yn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?yn.y=-.16*e.wheelDeltaY:yn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;yn.y=e.detail}Ke(w,!0);var t=he.x-yn.x,n=he.y-yn.y;(u.modal||t<=ie.min.x&&t>=ie.max.x&&n<=ie.min.y&&n>=ie.max.y)&&e.preventDefault(),r.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ge.x/2+ye.x,y:ge.y/2+ye.y};var n=u.getDoubleTapZoom(!0,r.currItem),i=w===n;r.mouseZoomedIn=!i,r.zoomTo(i?r.currItem.initialZoomLevel:n,t,333),a[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var wn,bn,xn,Cn,In,_n,Sn,Tn,En,Rn,kn,An,Dn={history:!0,galleryUID:1},Fn=function(){return kn.hash.substring(1)},Mn=function(){wn&&clearTimeout(wn),xn&&clearTimeout(xn)},On=function(){var e=Fn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(u.galleryPIDs){var a=t.pid;for(t.pid=0,n=0;n<Vt.length;n++)if(Vt[n].pid===a){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Ln=function Nn(){if(xn&&clearTimeout(xn),Je||G)return void(xn=setTimeout(Nn,500));Cn?clearTimeout(bn):Cn=!0;var e=m+1,t=Jt(m);t.hasOwnProperty("pid")&&(e=t.pid);var n=Sn+"&gid="+u.galleryUID+"&pid="+e;Tn||kn.hash.indexOf(n)===-1&&(Rn=!0);var i=kn.href.split("#")[0]+"#"+n;An?"#"+n!==window.location.hash&&history[Tn?"replaceState":"pushState"]("",document.title,i):Tn?kn.replace(i):kn.hash=n,Tn=!0,bn=setTimeout(function(){Cn=!1},60)};Se("History",{publicMethods:{initHistory:function(){if(a.extend(u,Dn,!0),u.history){kn=window.location,Rn=!1,En=!1,Tn=!1,Sn=Fn(),An="pushState"in history,Sn.indexOf("gid=")>-1&&(Sn=Sn.split("&gid=")[0],Sn=Sn.split("?gid=")[0]),Re("afterChange",r.updateURL),Re("unbindEvents",function(){a.unbind(window,"hashchange",r.onHashChange)});var e=function(){_n=!0,En||(Rn?history.back():Sn?kn.hash=Sn:An?history.pushState("",document.title,kn.pathname+kn.search):kn.hash=""),Mn()};Re("unbindEvents",function(){p&&e()}),Re("destroy",function(){_n||e()}),Re("firstUpdate",function(){m=On().pid});var t=Sn.indexOf("pid=");t>-1&&(Sn=Sn.substring(0,t),"&"===Sn.slice(-1)&&(Sn=Sn.slice(0,-1))),setTimeout(function(){c&&a.bind(window,"hashchange",r.onHashChange)},40)}},onHashChange:function(){return Fn()===Sn?(En=!0,void r.close()):void(Cn||(In=!0,r.goTo(On().pid),In=!1))},updateURL:function(){Mn(),In||(Tn?wn=setTimeout(Ln,800):Ln())}}}),a.extend(r,ot)};return e})},{}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){function t(t){var n=p(t).slideSelector;return t.find(n).map(function(t){var n=e(this).data("index",t),i=this.tagName.toUpperCase();return"A"===i?this.hash?n=e(this.hash):(n=n.find("img").eq(0),n.data("original-src",this.href)):"IMG"!==i&&(n=n.find("img")),n[0]})}function n(e){return function(t){var n=e.eq(t),i=n.offset(),o=n[0].width;return{x:i.left,y:i.top,w:o}}}function i(t,n){var i=e.Deferred(),o=n.data("original-src-"+t);return o?i.resolve(o):e("<img>").on("load",function(){i.resolve(this[t])}).attr("src",n.attr("src")),i.promise()}function o(e){return i("height",e)}function r(e){return i("width",e)}function l(t){var n=decodeURI(t.data("original-src")||t.attr("src")),i=n.match(/(\d+)[*x](\d+)/);if(null!==i){var s=function(){var t=e.Deferred();return setTimeout(function(){t.resolve(Number(i[1]),Number(i[2]))},0),{v:t.promise()}}();if("object"===("undefined"==typeof s?"undefined":a(s)))return s.v}return e.when(r(t),o(t))}function c(){var t=e(this),n=t.data("original-src")||t.attr("src"),i=e.Deferred();return"IMG"!==this.tagName?i.resolve({html:this.innerHTML}):l(t).done(function(e,o){i.resolve({w:e,h:o,src:n,msrc:t.attr("src"),title:t.attr("alt")})}),i.promise()}function d(t){var n=t.map(c).get(),i=e.Deferred();return e.when.apply(e,n).done(function(){var e=Array.prototype.slice.call(arguments);i.resolve(e)}),i.promise()}function p(e){return e.data("photoswipeOptions")}function m(e){e.data("pswp-uid")||e.data("pswp-uid",x++)}function f(t,i,o,a){var r=e.extend(p(i).globalOptions,{index:t,getThumbBoundsFn:n(o),galleryUID:i.data("pswp-uid")}),l=new s["default"](b[0],u["default"],a,r);e.each(p(i).events,function(e,t){l.listen(e,t)}),l.init()}function h(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i]){var o=n[i].split("=");o.length<2||(t[o[0]]=parseInt(o[1],10))}return t}function g(e){var n=h();n.pid&&n.gid&&!function(){var i=e[n.gid-1],o=n.pid-1,a=t(i),r=d(a);r.done(function(e){f(o,i,a,e)})}()}function v(t,n,i){t.on("click.photoswipe",p(t).slideSelector,function(o){o.preventDefault(),f(e(this).data("index"),t,n,i)})}function y(e){e.off("click.photoswipe")}function w(e){var n=t(e),i=d(n);i.done(function(t){y(e),v(e,n,t)})}var b=e('<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>').appendTo("body"),x=1;e.fn.photoSwipe=function(){var n=arguments.length<=0||void 0===arguments[0]?"img":arguments[0],i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a={bgOpacity:.973,showHideOpacity:!0},r=e.extend(a,i),s=[],l="update"===n;return this.each(function(){if(l)return void w(e(this));var i=e(this).data("photoswipeOptions",{slideSelector:n,globalOptions:r,events:o}),a=t(i),u=d(a);m(i),s.push(i),u.done(function(e){v(i,a,e)})}),l||g(s),this},e.fn.photoSwipe.PhotoSwipe=s["default"]}Object.defineProperty(n,"__esModule",{value:!0}),n.PhotoSwipe=n["default"]=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=e("/Applications/MAMP/htdocs/jquery.photoswipe/node_modules/photoswipe/dist/photoswipe.js"),s=i(r),l=e("/Applications/MAMP/htdocs/jquery.photoswipe/node_modules/photoswipe/dist/photoswipe-ui-default.js"),u=i(l);o(jQuery),n["default"]=o,n.PhotoSwipe=s["default"]},{"/Applications/MAMP/htdocs/jquery.photoswipe/node_modules/photoswipe/dist/photoswipe-ui-default.js":1,"/Applications/MAMP/htdocs/jquery.photoswipe/node_modules/photoswipe/dist/photoswipe.js":2}]},{},[3]),function(e){"use strict";function t(){var e=this,t=_.filter(e.items,function(e){return"image"===e.item_type});e.images=_.each(t,function(e){var t=e.meta.credit,n=e.meta.caption;n=n?'"'+n+'"':n;var i=t?n+" by "+t:n;e.meta.full_caption=i})}function n(){var e=this,t=e.posts();_.each(t,function(e){e.showGallery=_.filter(e.items,function(e){return"image"===e.item_type}).length>1}),e.all_posts=t}e.module("theme").controller("PostsCtrl",n).controller("GalleryCtrl",t).directive("lbSlideItem",["asset",function(e){return{restrict:"AE",scope:{ident:"=",item:"=",gallery:"="},templateUrl:e.templateUrl("views/item.html")}}]).directive("lbGallery",["asset",function(n){return{restrict:"AE",scope:{items:"="},bindToController:!0,controller:t,controllerAs:"gallery",templateUrl:n.templateUrl("views/gallery.html"),link:function(t,n,i,o){var a="img",r={showHideOpacity:!0,getThumbBoundsFn:!1},s={margins:3};t.$watch(i.items,function(t){setTimeout(function(){var t=e.element(n).find(".gallery");$(t[0]).justifiedGallery(s).on("jg.complete",function(){$(this).photoSwipe(a,r)})},100)})}}}]).directive("lbSlidePosts",["asset",function(e){return{restrict:"E",scope:{posts:"=",timeline:"="},bindToController:!0,controller:n,controllerAs:"ctrl",templateUrl:e.templateUrl("views/posts.html")}}])}(angular),angular.module("theme").run(["$templateCache",function(e){e.put("/themes_assets/classic/views/author.html",'<div class="lb-author" ng-if="timeline.settings.showAuthor"><div ng-if="timeline.settings.showAuthor && timeline.settings.showAuthorAvatar" ng-class="{\'lb-author__avatar\': (item.item_type !== \'comment\'),\n                       \'lb-author__comment\': (item.item_type === \'comment\')}"><img ng-src="{{ item.original_creator.picture_url }}"></div><div class="lb-author__date" ng-bind="item.displayDate | prettifyIsoDate"></div><div ng-if="!timeline.settings.authorNameLinksToEmail || item.item_type === \'comment\'" class="lb-author__name" ng-bind="item.original_creator[item.item_type === \'comment\'? \'display_name\': timeline.settings.authorNameFormat]"></div><div ng-if="timeline.settings.authorNameLinksToEmail && item.item_type !== \'comment\'" class="lb-author__name"><a href="mailto:{{post.mainItem.original_creator.email}}" ng-bind="item.original_creator[timeline.settings.authorNameFormat]"></a></div></div>'),e.put("/themes_assets/classic/views/comments.html",'<div class="modal-backdrop ng-cloak" ng-show="modal"></div><div class="modal ng-cloak" ng-show="modal"><div class="modal-dialog"><div ng-show="notify" class="notify"><div class="content"><div class="modal-header"><h3 translate>Your comment was sent for approval.</h3></div></div></div><div ng-show="form"><form name="comment" novalidate ng-submit="send();"><div class="content"><div class="modal-header"><h2 translate>Post a comment</h2></div><div class="modal-body"><fieldset><div class="field"><label for="commenter" translate>Name *</label><input name="commenter" ng-model="commenter"><div role="alert"><span class="error" ng-show="commenter.length < 3" translate>Please fill in your Name.</span> <span class="error" ng-show="commenter.length >30" translate>Name should be maximum 30 characters in length.</span></div></div><div class="field"><label for="content" translate>Comment *</label><textarea name="content" ng-model="content"></textarea><div role="alert"><span class="error" ng-show="content.length < 3" translate>Please fill in your Comment.</span> <span class="error" ng-show="content.length > 300" translate>Comment should be maximum 300 characters in length.</span></div></div></fieldset></div><div class="modal-footer"><button class="btn" ng-click="comment=false"><span translate>Cancel</span></button> <button type="submit" class="btn btn-primary"><span translate>Send</span></button></div></div></form></div></div></div>'),e.put("/themes_assets/classic/views/dropdown.html",'<div class="dropdown-container" ng-class="{ \'show\': listVisible }"><div class="dropdown-display" ng-click="show();" ng-class="{ \'clicked\': listVisible }"><span ng-if="!isPlaceholder">{{display | translate}}</span> <span class="placeholder" ng-if="isPlaceholder">{{placeholder}}</span> <i class="fa fa-angle-down"></i></div><div class="dropdown-list"><div><div ng-repeat="item in list" ng-click="select(item)" ng-class="{ \'selected\': isSelected(item) }"><span>{{item.name | translate}}</span> <i class="fa fa-check"></i></div></div></div></div>'),e.put("/themes_assets/classic/views/gallery.html",'<div class="lb-gallery"><div class="justified-gallery gallery"><a class="picture" href="#" ng-repeat="item in gallery.images track by item._id"><img ng-src="{{ item.picture_url }}" ng-srcset="{{ item.picture_srcset }}" alt="{{ item.meta.full_caption }}" data-original-src="{{ item.meta.media.renditions.baseImage.href }}" data-original-src-height="{{ item.meta.media.renditions.baseImage.height }}" data-original-src-width="{{ item.meta.media.renditions.baseImage.width }}"></a></div></div>'),e.put("/themes_assets/classic/views/generic-embed.html",'<div ng-if="item.meta.html" class="item--embed" lb-bind-html html-content="{{item.meta.html}}"></div><article class="item--embed"><a ng-href="{{ item.meta.url }}" ng-if="!item.meta.html && item.meta.thumbnail_url" target="_blank" ng-class="{ \'item--embed__illustration\': item.meta.description, \'item--embed__only-illustration\': !item.meta.description}"><img ng-src="{{ item.meta.thumbnail_url }}"></a><div class="item--embed__title" ng-if="item.meta.title"><a ng-href="{{ item.meta.url }}" target="_blank" ng-bind="item.meta.title"></a></div><div class="item--embed__description" ng-if="item.meta.description" ng-bind="item.meta.description"></div><div class="item--embed__credit" ng-if="item.meta.credit" ng-bind="item.meta.credit"></div></article>'),e.put("/themes_assets/classic/views/item.html",'<div ng-switch="item.item_type" ng-class="{\'lb-item\': ident}"><div ng-switch-when="embed"><div ng-switch="item.meta.provider_name"><div ng-switch-when="Twitter"><lb-twitter-card lb-twitter-content="{{ item.meta.html }}"></lb-twitter-card></div><div ng-switch-default lb-generic-embed lb-fluid-iframe item="item"></div></div></div><div ng-switch-when="quote"><blockquote><p>{{ item.meta.quote }}</p><h4>{{ item.meta.credit }}</h4></blockquote></div><div ng-switch-when="image" ng-if="!gallery"><figure><img ng-src="{{ item.picture_url }}" ng-srcset="{{ item.picture_srcset }}" alt="{{ item.meta.caption }}" sizes="80vw"><figcaption translate>{{ item.meta.caption }} credit: {{ item.meta.credit }}</figcaption></figure></div><article ng-switch-default lb-bind-html html-content="{{ item.text | outboundAnchors | fixMarkup }}"></article></div>'),e.put("/themes_assets/classic/views/posts.html",'<article ng-repeat="post in ctrl.all_posts track by post._id" class="lb-post list-group-item ng-cloak" ng-class="{\'show-author-avatar\': ctrl.timeline.settings.showAuthor && ctrl.timeline.settings.showAuthorAvatar,\n                    \'lb-post-permalink-selected\': post._id === ctrl.timeline.permalink._id}"><lb-author item="post.mainItem" timeline="ctrl.timeline"></lb-author><div class="lb-post-highlighted" ng-if="post.highlight"><i class="fa fa-star fa-2"></i></div><div class="lb-post-permalink"><a href="{{ ctrl.timeline.permalink.get(post._id) }}" id="{{ post._id }}" target="_blank"><i class="fa fa-link fa-2"></i></a></div><lb-gallery items="post.items" ng-if="post.showGallery"></lb-gallery><div ng-repeat="item in post.items track by item._id" class="lb-item"><div ng-if="post.fullDetails && !$first" class="list-group-item"><div class="lb-timeline__header"><lb-author item="item" timeline="ctrl.timeline"></lb-author><lb-slide-item item="item" ident="true" gallery="post.showGallery"></lb-slide-item></div></div><div ng-if="!post.fullDetails || $first"><lb-slide-item item="item" gallery="post.showGallery"></lb-slide-item></div></div><div class="lb-updated-date ng-cloak" ng-show="post.showUpdate" translate>Updated {{post.content_updated_date | prettifyIsoDate}}</div></article>')}]);